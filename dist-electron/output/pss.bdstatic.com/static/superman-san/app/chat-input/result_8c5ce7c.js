define("superman-san/app/chat-input/result_8c5ce7c",["san","tslib","@searchfe/inject-js"],function(__WEBPACK_EXTERNAL_MODULE__0__,__WEBPACK_EXTERNAL_MODULE__1__,__WEBPACK_EXTERNAL_MODULE__5__){return a=[function(t,e){t.exports=__WEBPACK_EXTERNAL_MODULE__0__},function(t,e){t.exports=__WEBPACK_EXTERNAL_MODULE__1__},function(t,e,n){e=function(){"use strict";function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function a(t){return typeof t}:function a(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var r=n(0).defineComponent;function s(t){if(null===t||t===undefined)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var i=arguments[n];if(null!==i&&i!==undefined)for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e}t.exports=function(t,e,n){for(var i=function(t){var e=[t];"function"==typeof t&&(e.push(t.prototype),t.prototype.constructor&&e.push(t.prototype.constructor.prototype));return e}(t),o=0;o<i.length;o++)e&&("string"==typeof e?i[o].template=e:e instanceof Array?i[o].aPack=e:i[o].aNode=e),n.length&&function(t,e){for(var n={},i=0;i<e.length;i++)s(n,e[i]);var o=t.initData;t.initData=o?function(){return s({},o.call(this),{$style:n})}:function(){return{$style:n}}}(i[o],n);return"object"===a(t)?r(t):t}}.apply(e,[]);e===undefined||(t.exports=e)},function(t,e,n){e=function(){"use strict";t.exports=function(n){var l=[];return l.toString=function(){return this.map(function(t){var e=function(t,e){var n=t[1]||"",i=t[3];if(!i)return n;if(e&&"function"==typeof btoa){t=function(t){t=btoa(unescape(encodeURIComponent(JSON.stringify(t)))),t="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(t);return"/*# ".concat(t," */")}(i),e=i.sources.map(function(t){return"/*# sourceURL=".concat(i.sourceRoot||"").concat(t," */")});return[n].concat(e).concat([t]).join("\n")}return[n].join("\n")}(t,n);return t[2]?"@media ".concat(t[2]," {").concat(e,"}"):e}).join("")},l.i=function(t,e,n){"string"==typeof t&&(t=[[null,t,""]]);var i={};if(n)for(var o=0;o<this.length;o++){var a=this[o][0];null!=a&&(i[a]=!0)}for(var r=0;r<t.length;r++){var s=[].concat(t[r]);n&&i[s[0]]||(e&&(s[2]?s[2]="".concat(e," and ").concat(s[2]):s[2]=e),l.push(s))}},l}}.apply(e,[]);e===undefined||(t.exports=e)},function(t,e,n){"use strict";function l(t,e){for(var n=[],i={},o=0;o<e.length;o++){var a=e[o],r=a[0],a={id:t+":"+o,css:a[1],media:a[2],sourceMap:a[3]};i[r]?i[r].parts.push(a):n.push(i[r]={id:r,parts:[a]})}return n}n.r(e),n.d(e,"default",function(){return o});n="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!n)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var u={},i=n&&(document.head||document.getElementsByTagName("head")[0]),a=null,r=0,c=!1,s=function(){},p=null,d="data-vue-ssr-id",h="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function o(r,t,e,n){c=!!n.runAsProduction||e,p=n||{};var s=l(r,t);return g(s),function(t){for(var e=[],n=0;n<s.length;n++){var i=s[n];(o=u[i.id]).refs--,e.push(o)}t?g(s=l(r,t)):s=[];for(var o,n=0;n<e.length;n++)if(0===(o=e[n]).refs){for(var a=0;a<o.parts.length;a++)o.parts[a]();delete u[o.id]}}}function g(t){for(var e=0;e<t.length;e++){var n=t[e],i=u[n.id];if(i){i.refs++;for(var o=0;o<i.parts.length;o++)i.parts[o](n.parts[o]);for(;o<n.parts.length;o++)i.parts.push(m(n.parts[o]));i.parts.length>n.parts.length&&(i.parts.length=n.parts.length)}else{for(var a=[],o=0;o<n.parts.length;o++)a.push(m(n.parts[o]));u[n.id]={id:n.id,refs:1,parts:a}}}}function f(){var t,e=document.createElement("style"),n=p.attributes||{};for(t in e.type="text/css",n)n.hasOwnProperty(t)&&e.setAttribute(t,n[t]);return i.appendChild(e),e}function m(e){var t,n,i,o=document.querySelector("style["+d+'~="'+e.id+'"]');if(o){if(c)return s;o.parentNode.removeChild(o)}return i=h?(t=r++,o=a=a||f(),n=w.bind(null,o,t,!1),w.bind(null,o,t,!0)):(o=f(),n=function(t,e){var n=e.css,i=e.media,o=e.sourceMap;i&&t.setAttribute("media",i);p.ssrId&&t.setAttribute(d,e.id);o&&(n+="\n/*# sourceURL="+o.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");if(t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}.bind(null,o),function(){o.parentNode.removeChild(o)}),n(e),function(t){t?t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap||n(e=t):i()}}var v,b=(v=[],function(t,e){return v[t]=e,v.filter(Boolean).join("\n")});function w(t,e,n,i){n=n?"":i.css;t.styleSheet?t.styleSheet.cssText=b(e,n):(i=document.createTextNode(n),(n=t.childNodes)[e]&&t.removeChild(n[e]),n.length?t.insertBefore(i,n[e]):t.appendChild(i))}},function(t,e){t.exports=__WEBPACK_EXTERNAL_MODULE__5__},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.s_session=e.ls=e.bds=e.$=e.F=void 0,e.F=window.F,e.$=window.$,e.bds=window.bds,e.ls=window.localStorage,e.s_session=window.s_session},,function(t,e){var n=function(){return this}();try{n=n||new Function("return this")()}catch(i){"object"==typeof window&&(n=window)}t.exports=n},,,,,,,function(t,D,R){"use strict";!function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var s=R(16),a=R(17),r=R(18);function n(){return p.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(t,e){if(n()<e)throw new RangeError("Invalid typed array length");return p.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=p.prototype:(t=null===t?new p(e):t).length=e,t}function p(t,e,n){if(!(p.TYPED_ARRAY_SUPPORT||this instanceof p))return new p(t,e,n);if("number"!=typeof t)return i(this,t,e,n);if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return u(this,t)}function i(t,e,n,i){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,i){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(i||0))throw new RangeError("'length' is out of bounds");e=n===undefined&&i===undefined?new Uint8Array(e):i===undefined?new Uint8Array(e,n):new Uint8Array(e,n,i);p.TYPED_ARRAY_SUPPORT?(t=e).__proto__=p.prototype:t=c(t,e);return t}(t,e,n,i):"string"==typeof e?function(t,e,n){"string"==typeof n&&""!==n||(n="utf8");if(!p.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var i=0|h(e,n),n=(t=o(t,i)).write(e,n);n!==i&&(t=t.slice(0,n));return t}(t,e,n):function(t,e){if(p.isBuffer(e)){var n=0|d(e.length);return 0===(t=o(t,n)).length?t:(e.copy(t,0,0,n),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||function(t){return t!=t}(e.length)?o(t,0):c(t,e);if("Buffer"===e.type&&r(e.data))return c(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function l(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function u(t,e){if(l(e),t=o(t,e<0?0:0|d(e)),!p.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function c(t,e){var n=e.length<0?0:0|d(e.length);t=o(t,n);for(var i=0;i<n;i+=1)t[i]=255&e[i];return t}function d(t){if(t>=n())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n().toString(16)+" bytes");return 0|t}function h(t,e){if(p.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;var n=(t="string"!=typeof t?""+t:t).length;if(0===n)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case undefined:return A(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return L(t).length;default:if(i)return A(t).length;e=(""+e).toLowerCase(),i=!0}}function e(t,e,n){var i,o,a,r=!1;if((e=e===undefined||e<0?0:e)>this.length)return"";if((n=n===undefined||n>this.length?this.length:n)<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t=t||"utf8";;)switch(t){case"hex":return function(t,e,n){var i=t.length;(!e||e<0)&&(e=0);(!n||n<0||i<n)&&(n=i);for(var o="",a=e;a<n;++a)o+=function(t){return t<16?"0"+t.toString(16):t.toString(16)}(t[a]);return o}(this,e,n);case"utf8":case"utf-8":return w(this,e,n);case"ascii":return function(t,e,n){var i="";n=Math.min(t.length,n);for(var o=e;o<n;++o)i+=String.fromCharCode(127&t[o]);return i}(this,e,n);case"latin1":case"binary":return function(t,e,n){var i="";n=Math.min(t.length,n);for(var o=e;o<n;++o)i+=String.fromCharCode(t[o]);return i}(this,e,n);case"base64":return i=this,a=n,0===(o=e)&&a===i.length?s.fromByteArray(i):s.fromByteArray(i.slice(o,a));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(t,e,n){for(var i=t.slice(e,n),o="",a=0;a<i.length;a+=2)o+=String.fromCharCode(i[a]+256*i[a+1]);return o}(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function g(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function f(t,e,n,i,o){if(0===t.length)return-1;if("string"==typeof n?(i=n,n=0):2147483647<n?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,(n=(n=isNaN(n)?o?0:t.length-1:n)<0?t.length+n:n)>=t.length){if(o)return-1;n=t.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof e&&(e=p.from(e,i)),p.isBuffer(e))return 0===e.length?-1:m(t,e,n,i,o);if("number"==typeof e)return e&=255,p.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?(o?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(t,e,n):m(t,[e],n,i,o);throw new TypeError("val must be string, number or Buffer")}function m(t,e,n,i,o){var a=1,r=t.length,s=e.length;if(i!==undefined&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(t.length<2||e.length<2)return-1;r/=a=2,s/=2,n/=2}function l(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(o)for(var u=-1,c=n;c<r;c++)if(l(t,c)===l(e,-1===u?0:c-u)){if(c-(u=-1===u?c:u)+1===s)return u*a}else-1!==u&&(c-=c-u),u=-1;else for(c=n=r<n+s?r-s:n;0<=c;c--){for(var p=!0,d=0;d<s;d++)if(l(t,c+d)!==l(e,d)){p=!1;break}if(p)return c}return-1}function v(t,e,n,i){return P(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,i)}function b(t,e,n,i){return P(function(t,e){for(var n,i,o=[],a=0;a<t.length&&!((e-=2)<0);++a)i=t.charCodeAt(a),n=i>>8,i=i%256,o.push(i),o.push(n);return o}(e,t.length-n),t,n,i)}function w(t,e,n){n=Math.min(t.length,n);for(var i=[],o=e;o<n;){var a,r,s,l,u=t[o],c=null,p=239<u?4:223<u?3:191<u?2:1;if(o+p<=n)switch(p){case 1:u<128&&(c=u);break;case 2:128==(192&(a=t[o+1]))&&127<(l=(31&u)<<6|63&a)&&(c=l);break;case 3:a=t[o+1],r=t[o+2],128==(192&a)&&128==(192&r)&&2047<(l=(15&u)<<12|(63&a)<<6|63&r)&&(l<55296||57343<l)&&(c=l);break;case 4:a=t[o+1],r=t[o+2],s=t[o+3],128==(192&a)&&128==(192&r)&&128==(192&s)&&65535<(l=(15&u)<<18|(63&a)<<12|(63&r)<<6|63&s)&&l<1114112&&(c=l)}null===c?(c=65533,p=1):65535<c&&(c-=65536,i.push(c>>>10&1023|55296),c=56320|1023&c),i.push(c),o+=p}return function(t){var e=t.length;if(e<=y)return String.fromCharCode.apply(String,t);var n="",i=0;for(;i<e;)n+=String.fromCharCode.apply(String,t.slice(i,i+=y));return n}(i)}D.Buffer=p,D.SlowBuffer=function(t){+t!=t&&(t=0);return p.alloc(+t)},D.INSPECT_MAX_BYTES=50,p.TYPED_ARRAY_SUPPORT=t.TYPED_ARRAY_SUPPORT!==undefined?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(e){return!1}}(),D.kMaxLength=n(),p.poolSize=8192,p._augment=function(t){return t.__proto__=p.prototype,t},p.from=function(t,e,n){return i(null,t,e,n)},p.TYPED_ARRAY_SUPPORT&&(p.prototype.__proto__=Uint8Array.prototype,p.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&p[Symbol.species]===p&&Object.defineProperty(p,Symbol.species,{value:null,configurable:!0})),p.alloc=function(t,e,n){return i=null,e=e,n=n,l(t=t),!(t<=0)&&e!==undefined?"string"==typeof n?o(i,t).fill(e,n):o(i,t).fill(e):o(i,t);var i},p.allocUnsafe=function(t){return u(null,t)},p.allocUnsafeSlow=function(t){return u(null,t)},p.isBuffer=function(t){return!(null==t||!t._isBuffer)},p.compare=function(t,e){if(!p.isBuffer(t)||!p.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,i=e.length,o=0,a=Math.min(n,i);o<a;++o)if(t[o]!==e[o]){n=t[o],i=e[o];break}return n<i?-1:i<n?1:0},p.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},p.concat=function(t,e){if(!r(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return p.alloc(0);if(e===undefined)for(o=e=0;o<t.length;++o)e+=t[o].length;for(var n=p.allocUnsafe(e),i=0,o=0;o<t.length;++o){var a=t[o];if(!p.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(n,i),i+=a.length}return n},p.byteLength=h,p.prototype._isBuffer=!0,p.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)g(this,e,e+1);return this},p.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)g(this,e,e+3),g(this,e+1,e+2);return this},p.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)g(this,e,e+7),g(this,e+1,e+6),g(this,e+2,e+5),g(this,e+3,e+4);return this},p.prototype.toString=function(){var t=0|this.length;return 0==t?"":0===arguments.length?w(this,0,t):e.apply(this,arguments)},p.prototype.equals=function(t){if(!p.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===p.compare(this,t)},p.prototype.inspect=function(){var t="",e=D.INSPECT_MAX_BYTES;return 0<this.length&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},p.prototype.compare=function(t,e,n,i,o){if(!p.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(e===undefined&&(e=0),n===undefined&&(n=t?t.length:0),i===undefined&&(i=0),o===undefined&&(o=this.length),e<0||n>t.length||i<0||o>this.length)throw new RangeError("out of range index");if(o<=i&&n<=e)return 0;if(o<=i)return-1;if(n<=e)return 1;if(this===t)return 0;for(var a=(o>>>=0)-(i>>>=0),r=(n>>>=0)-(e>>>=0),s=Math.min(a,r),l=this.slice(i,o),u=t.slice(e,n),c=0;c<s;++c)if(l[c]!==u[c]){a=l[c],r=u[c];break}return a<r?-1:r<a?1:0},p.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},p.prototype.indexOf=function(t,e,n){return f(this,t,e,n,!0)},p.prototype.lastIndexOf=function(t,e,n){return f(this,t,e,n,!1)},p.prototype.write=function(t,e,n,i){if(e===undefined)i="utf8",n=this.length,e=0;else if(n===undefined&&"string"==typeof e)i=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,i===undefined&&(i="utf8")):(i=n,n=undefined)}var o=this.length-e;if((n===undefined||o<n)&&(n=o),0<t.length&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");i=i||"utf8";for(var a,r,s,l=!1;;)switch(i){case"hex":return function(t,e,n,i){n=Number(n)||0;var o=t.length-n;if((!i||o<(i=Number(i)))&&(i=o),(o=e.length)%2!=0)throw new TypeError("Invalid hex string");o/2<i&&(i=o/2);for(var a=0;a<i;++a){var r=parseInt(e.substr(2*a,2),16);if(isNaN(r))return a;t[n+a]=r}return a}(this,t,e,n);case"utf8":case"utf-8":return r=e,s=n,P(A(t,(a=this).length-r),a,r,s);case"ascii":return v(this,t,e,n);case"latin1":case"binary":return v(this,t,e,n);case"base64":return a=this,r=e,s=n,P(L(t),a,r,s);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return b(this,t,e,n);default:if(l)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),l=!0}},p.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var y=4096;function x(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(n<t+e)throw new RangeError("Trying to access beyond buffer length")}function _(t,e,n,i,o,a){if(!p.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(o<e||e<a)throw new RangeError('"value" argument is out of bounds');if(n+i>t.length)throw new RangeError("Index out of range")}function S(t,e,n,i){e<0&&(e=65535+e+1);for(var o=0,a=Math.min(t.length-n,2);o<a;++o)t[n+o]=(e&255<<8*(i?o:1-o))>>>8*(i?o:1-o)}function C(t,e,n,i){e<0&&(e=4294967295+e+1);for(var o=0,a=Math.min(t.length-n,4);o<a;++o)t[n+o]=e>>>8*(i?o:3-o)&255}function k(t,e,n,i){if(n+i>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function T(t,e,n,i,o){return o||k(t,0,n,4),a.write(t,e,n,i,23,4),n+4}function E(t,e,n,i,o){return o||k(t,0,n,8),a.write(t,e,n,i,52,8),n+8}p.prototype.slice=function(t,e){var n=this.length;if((t=~~t)<0?(t+=n)<0&&(t=0):n<t&&(t=n),(e=e===undefined?n:~~e)<0?(e+=n)<0&&(e=0):n<e&&(e=n),e<t&&(e=t),p.TYPED_ARRAY_SUPPORT)(o=this.subarray(t,e)).__proto__=p.prototype;else for(var i=e-t,o=new p(i,undefined),a=0;a<i;++a)o[a]=this[a+t];return o},p.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||x(t,e,this.length);for(var i=this[t],o=1,a=0;++a<e&&(o*=256);)i+=this[t+a]*o;return i},p.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||x(t,e,this.length);for(var i=this[t+--e],o=1;0<e&&(o*=256);)i+=this[t+--e]*o;return i},p.prototype.readUInt8=function(t,e){return e||x(t,1,this.length),this[t]},p.prototype.readUInt16LE=function(t,e){return e||x(t,2,this.length),this[t]|this[t+1]<<8},p.prototype.readUInt16BE=function(t,e){return e||x(t,2,this.length),this[t]<<8|this[t+1]},p.prototype.readUInt32LE=function(t,e){return e||x(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},p.prototype.readUInt32BE=function(t,e){return e||x(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},p.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||x(t,e,this.length);for(var i=this[t],o=1,a=0;++a<e&&(o*=256);)i+=this[t+a]*o;return(o*=128)<=i&&(i-=Math.pow(2,8*e)),i},p.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||x(t,e,this.length);for(var i=e,o=1,a=this[t+--i];0<i&&(o*=256);)a+=this[t+--i]*o;return(o*=128)<=a&&(a-=Math.pow(2,8*e)),a},p.prototype.readInt8=function(t,e){return e||x(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},p.prototype.readInt16LE=function(t,e){e||x(t,2,this.length);t=this[t]|this[t+1]<<8;return 32768&t?4294901760|t:t},p.prototype.readInt16BE=function(t,e){e||x(t,2,this.length);t=this[t+1]|this[t]<<8;return 32768&t?4294901760|t:t},p.prototype.readInt32LE=function(t,e){return e||x(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},p.prototype.readInt32BE=function(t,e){return e||x(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},p.prototype.readFloatLE=function(t,e){return e||x(t,4,this.length),a.read(this,t,!0,23,4)},p.prototype.readFloatBE=function(t,e){return e||x(t,4,this.length),a.read(this,t,!1,23,4)},p.prototype.readDoubleLE=function(t,e){return e||x(t,8,this.length),a.read(this,t,!0,52,8)},p.prototype.readDoubleBE=function(t,e){return e||x(t,8,this.length),a.read(this,t,!1,52,8)},p.prototype.writeUIntLE=function(t,e,n,i){t=+t,e|=0,n|=0,i||_(this,t,e,n,Math.pow(2,8*n)-1,0);var o=1,a=0;for(this[e]=255&t;++a<n&&(o*=256);)this[e+a]=t/o&255;return e+n},p.prototype.writeUIntBE=function(t,e,n,i){t=+t,e|=0,n|=0,i||_(this,t,e,n,Math.pow(2,8*n)-1,0);var o=n-1,a=1;for(this[e+o]=255&t;0<=--o&&(a*=256);)this[e+o]=t/a&255;return e+n},p.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||_(this,t,e,1,255,0),p.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},p.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||_(this,t,e,2,65535,0),p.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):S(this,t,e,!0),e+2},p.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||_(this,t,e,2,65535,0),p.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):S(this,t,e,!1),e+2},p.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||_(this,t,e,4,4294967295,0),p.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):C(this,t,e,!0),e+4},p.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||_(this,t,e,4,4294967295,0),p.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):C(this,t,e,!1),e+4},p.prototype.writeIntLE=function(t,e,n,i){t=+t,e|=0,i||_(this,t,e,n,(i=Math.pow(2,8*n-1))-1,-i);var o=0,a=1,r=0;for(this[e]=255&t;++o<n&&(a*=256);)t<0&&0===r&&0!==this[e+o-1]&&(r=1),this[e+o]=(t/a>>0)-r&255;return e+n},p.prototype.writeIntBE=function(t,e,n,i){t=+t,e|=0,i||_(this,t,e,n,(i=Math.pow(2,8*n-1))-1,-i);var o=n-1,a=1,r=0;for(this[e+o]=255&t;0<=--o&&(a*=256);)t<0&&0===r&&0!==this[e+o+1]&&(r=1),this[e+o]=(t/a>>0)-r&255;return e+n},p.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||_(this,t,e,1,127,-128),p.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&(t=t<0?255+t+1:t),e+1},p.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||_(this,t,e,2,32767,-32768),p.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):S(this,t,e,!0),e+2},p.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||_(this,t,e,2,32767,-32768),p.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):S(this,t,e,!1),e+2},p.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||_(this,t,e,4,2147483647,-2147483648),p.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):C(this,t,e,!0),e+4},p.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||_(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),p.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):C(this,t,e,!1),e+4},p.prototype.writeFloatLE=function(t,e,n){return T(this,t,e,!0,n)},p.prototype.writeFloatBE=function(t,e,n){return T(this,t,e,!1,n)},p.prototype.writeDoubleLE=function(t,e,n){return E(this,t,e,!0,n)},p.prototype.writeDoubleBE=function(t,e,n){return E(this,t,e,!1,n)},p.prototype.copy=function(t,e,n,i){if(n=n||0,i||0===i||(i=this.length),e>=t.length&&(e=t.length),(i=0<i&&i<n?n:i)===n)return 0;if(0===t.length||0===this.length)return 0;if((e=e||0)<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length);var o,a=(i=t.length-e<i-n?t.length-e+n:i)-n;if(this===t&&n<e&&e<i)for(o=a-1;0<=o;--o)t[o+e]=this[o+n];else if(a<1e3||!p.TYPED_ARRAY_SUPPORT)for(o=0;o<a;++o)t[o+e]=this[o+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+a),e);return a},p.prototype.fill=function(t,e,n,i){if("string"==typeof t){var o;if("string"==typeof e?(i=e,e=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),1!==t.length||(o=t.charCodeAt(0))<256&&(t=o),i!==undefined&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!p.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;if(e>>>=0,n=n===undefined?this.length:n>>>0,"number"==typeof(t=t||0))for(s=e;s<n;++s)this[s]=t;else for(var a=p.isBuffer(t)?t:A(new p(t,i).toString()),r=a.length,s=0;s<n-e;++s)this[s+e]=a[s%r];return this};var I=/[^+\/0-9A-Za-z-_]/g;function A(t,e){var n;e=e||Infinity;for(var i=t.length,o=null,a=[],r=0;r<i;++r){if(55295<(n=t.charCodeAt(r))&&n<57344){if(!o){if(56319<n){-1<(e-=3)&&a.push(239,191,189);continue}if(r+1===i){-1<(e-=3)&&a.push(239,191,189);continue}o=n;continue}if(n<56320){-1<(e-=3)&&a.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&-1<(e-=3)&&a.push(239,191,189);if(o=null,n<128){if(--e<0)break;a.push(n)}else if(n<2048){if((e-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function L(t){return s.toByteArray(function(t){var e;if((t=((e=t).trim?e.trim():e.replace(/^\s+|\s+$/g,"")).replace(I,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function P(t,e,n,i){for(var o=0;o<i&&!(o+n>=e.length||o>=t.length);++o)e[o+n]=t[o];return o}}.call(this,R(8))},function(t,e,n){"use strict";e.byteLength=function(t){var e=c(t),t=e[0],e=e[1];return 3*(t+e)/4-e},e.toByteArray=function(t){var e,n,i=c(t),o=i[0],i=i[1],a=new u(function(t,e){return 3*(t+e)/4-e}(o,i)),r=0,s=0<i?o-4:o;for(n=0;n<s;n+=4)e=l[t.charCodeAt(n)]<<18|l[t.charCodeAt(n+1)]<<12|l[t.charCodeAt(n+2)]<<6|l[t.charCodeAt(n+3)],a[r++]=e>>16&255,a[r++]=e>>8&255,a[r++]=255&e;2===i&&(e=l[t.charCodeAt(n)]<<2|l[t.charCodeAt(n+1)]>>4,a[r++]=255&e);1===i&&(e=l[t.charCodeAt(n)]<<10|l[t.charCodeAt(n+1)]<<4|l[t.charCodeAt(n+2)]>>2,a[r++]=e>>8&255,a[r++]=255&e);return a},e.fromByteArray=function(t){for(var e,n=t.length,i=n%3,o=[],a=0,r=n-i;a<r;a+=16383)o.push(function(t,e,n){for(var i,o=[],a=e;a<n;a+=3)i=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),o.push(function(t){return s[t>>18&63]+s[t>>12&63]+s[t>>6&63]+s[63&t]}(i));return o.join("")}(t,a,r<a+16383?r:a+16383));1==i?(e=t[n-1],o.push(s[e>>2]+s[e<<4&63]+"==")):2==i&&(e=(t[n-2]<<8)+t[n-1],o.push(s[e>>10]+s[e>>4&63]+s[e<<2&63]+"="));return o.join("")};for(var s=[],l=[],u="undefined"!=typeof Uint8Array?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,a=i.length;o<a;++o)s[o]=i[o],l[i.charCodeAt(o)]=o;function c(t){var e=t.length;if(0<e%4)throw new Error("Invalid string. Length must be a multiple of 4");t=t.indexOf("=");return[t=-1===t?e:t,t===e?0:4-t%4]}l["-".charCodeAt(0)]=62,l["_".charCodeAt(0)]=63},function(t,e){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
e.read=function(t,e,n,i,o){var a,r,s=8*o-i-1,l=(1<<s)-1,u=l>>1,c=-7,p=n?o-1:0,d=n?-1:1,n=t[e+p];for(p+=d,a=n&(1<<-c)-1,n>>=-c,c+=s;0<c;a=256*a+t[e+p],p+=d,c-=8);for(r=a&(1<<-c)-1,a>>=-c,c+=i;0<c;r=256*r+t[e+p],p+=d,c-=8);if(0===a)a=1-u;else{if(a===l)return r?NaN:(n?-1:1)*Infinity;r+=Math.pow(2,i),a-=u}return(n?-1:1)*r*Math.pow(2,a-i)},e.write=function(t,e,n,i,o,a){var r,s,l=8*a-o-1,u=(1<<l)-1,c=u>>1,p=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,d=i?0:a-1,h=i?1:-1,a=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===Infinity?(s=isNaN(e)?1:0,r=u):(r=Math.floor(Math.log(e)/Math.LN2),e*(i=Math.pow(2,-r))<1&&(r--,i*=2),2<=(e+=1<=r+c?p/i:p*Math.pow(2,1-c))*i&&(r++,i/=2),u<=r+c?(s=0,r=u):1<=r+c?(s=(e*i-1)*Math.pow(2,o),r+=c):(s=e*Math.pow(2,c-1)*Math.pow(2,o),r=0));8<=o;t[n+d]=255&s,d+=h,s/=256,o-=8);for(r=r<<o|s,l+=o;0<l;t[n+d]=255&r,d+=h,r/=256,l-=8);t[n+d-h]|=128*a}},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},,,,,,,,,,,,,,,,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});n=(0,n(1).__importDefault)(n(386));e["default"]=n["default"]},,,,,,,function(t,w,e){"use strict";!function(e){Object.defineProperty(w,"__esModule",{value:!0}),w.isValid=w.encodeURI=w.decode=w.encode=void 0;var n,s=Array.prototype.slice.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="),r=(n={},s.forEach(function(t,e){return n[t]=e}),n),l=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,u=String.fromCharCode.bind(String),t="function"==typeof e,i="function"==typeof TextDecoder?new TextDecoder:undefined,a="function"==typeof TextEncoder?new TextEncoder:undefined,o="function"==typeof Uint8Array.from?Uint8Array.from.bind(Uint8Array):function(t){return new Uint8Array(Array.prototype.slice.call(t,0))},c=function(t){return t.replace(/[^A-Za-z0-9\+\/]/g,"")},p="function"==typeof btoa?function(t){return btoa(t)}:t?function(t){return e.from(t,"binary").toString("base64")}:function(t){for(var e,n,i,o="",a=t.length%3,r=0;r<t.length;){if(255<(e=t.charCodeAt(r++))||255<(n=t.charCodeAt(r++))||255<(i=t.charCodeAt(r++)))throw new TypeError("invalid character found");o+=s[(e=e<<16|n<<8|i)>>18&63]+s[e>>12&63]+s[e>>6&63]+s[63&e]}return a?o.slice(0,a-3)+"===".substring(a):o},d=function(t){if(t.length<2)return(e=t.charCodeAt(0))<128?t:e<2048?u(192|e>>>6)+u(128|63&e):u(224|e>>>12&15)+u(128|e>>>6&63)+u(128|63&e);var e=65536+1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320);return u(240|e>>>18&7)+u(128|e>>>12&63)+u(128|e>>>6&63)+u(128|63&e)},h=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,g=t?function(t){return e.from(t,"utf8").toString("base64")}:a?function(t){for(var e=a.encode(t),n=[],i=0,o=e.length;i<o;i+=4096)n.push(u.apply(null,Array.from(e.subarray(i,i+4096))));return p(n.join(""))}:function(t){return p(t.replace(h,d))},f="function"==typeof atob?function(t){return atob(c(t))}:t?function(t){return e.from(t,"base64").toString("binary")}:function(t){if(t=t.replace(/\s+/g,""),!l.test(t))throw new TypeError("malformed base64.");var e,n,i;t+="==".slice(2-(3&t.length));for(var o=[],a=0;a<t.length;)e=r[t.charAt(a++)]<<18|r[t.charAt(a++)]<<12|(n=r[t.charAt(a++)])<<6|(i=r[t.charAt(a++)]),64===n?o.push(u(e>>16&255)):64===i?o.push(u(e>>16&255,e>>8&255)):o.push(u(e>>16&255,e>>8&255,255&e));return o.join("")},m=function(t){switch(t.length){case 4:var e=((7&t.charCodeAt(0))<<18|(63&t.charCodeAt(1))<<12|(63&t.charCodeAt(2))<<6|63&t.charCodeAt(3))-65536;return u(55296+(e>>>10))+u(56320+(1023&e));case 3:return u((15&t.charCodeAt(0))<<12|(63&t.charCodeAt(1))<<6|63&t.charCodeAt(2));default:return u((31&t.charCodeAt(0))<<6|63&t.charCodeAt(1))}},v=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,b=t?function(t){return e.from(t,"base64").toString("utf8")}:i?function(t){t=o(f(t).split("").map(function(t){return t.charCodeAt(0)}));return i.decode(t)}:function(t){return f(t).replace(v,m)};w.encode=function(t,e){return(e=void 0===e?!1:e)?g(t).replace(/=/g,"").replace(/[+\/]/g,function(t){return"+"===t?"-":"_"}):g(t)};w.decode=function(t){return b(c(t.replace(/[-_]/g,function(t){return"-"===t?"+":"/"})))};w.encodeURI=function(t){return(0,w.encode)(t,!0)};w.isValid=function(t){if("string"!=typeof t)return!1;t=t.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(t)||!/[^\s0-9a-zA-Z\-_]/.test(t)},w["default"]={encode:w.encode,decode:w.decode,encodeURI:w.encodeURI,isValid:w.isValid}}.call(this,e(15).Buffer)},function(t,u,e){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.UploadFile=u.UPLOAD_ALL_TYPE=u.UPLOAD_IMAGE_TYPE=u.UPLOAD_FILE_TYPE=u.imageAccept=u.FILE_STATUS=u.FileRecommendWordsGroup=u.UploadStatus=u.getFileNameSuffix=u.getFileType=u.suffixToFileType=void 0;var k=e(1),n=e(97),a="/aichat/api/file/sts",s="/aichat/api/file/upload",T="/aichat/api/file/loop",l="/aichat/api/knowledge/file/delete",i=/\.(\w+)$/,o={pdf:"PDF",doc:"Word",docx:"Word",txt:"TXT",xls:"Excel",xlsx:"Excel",ppt:"PPT",pptx:"PPT",csv:"Excel",py:"Code",java:"Code",js:"Code",html:"Code",css:"Code",ts:"Code",c:"Code",cpp:"Code",cc:"Code",h:"Code",go:"Code"};u.suffixToFileType=function(t){if(!t)return"unknown";t=t.toLowerCase();return o[t]||"unknown"};u.getFileType=function(t){t=i.exec(t);return t?(0,u.suffixToFileType)(t[1]):"unknown"};var E;u.getFileNameSuffix=function(t){t=i.exec(t);return t?t[0]:""},(e=E=u.UploadStatus||(u.UploadStatus={}))[e.INIT=-1]="INIT",e[e.STSSUCCESS=0]="STSSUCCESS",e[e.UPLOADING=1]="UPLOADING",e[e.BOS_SUCCESS=2]="BOS_SUCCESS",e[e.NETWORK_ERROR=3]="NETWORK_ERROR",e[e.RISK_DENY=4]="RISK_DENY",e[e.FILE_NUM_EXCEED_LIMIT=5]="FILE_NUM_EXCEED_LIMIT",e[e.FILE_SIZE_EXCEED_LIMIT=6]="FILE_SIZE_EXCEED_LIMIT",e[e.KNOWLEDGE_SUCCESS=7]="KNOWLEDGE_SUCCESS",e[e.KNOWLEDGE_ERROR=8]="KNOWLEDGE_ERROR",e[e.SET_FILE_NUM=9]="SET_FILE_NUM",e[e.NOT_AVAILABLE=10]="NOT_AVAILABLE",e[e.FILE_REUPLOAD=11]="FILE_REUPLOAD",e[e.FILE_SIZE_BELOW_LIMIT=12]="FILE_SIZE_BELOW_LIMIT",e[e.IMAGE_INFO_SUCCESS=13]="IMAGE_INFO_SUCCESS",(e=u.FileRecommendWordsGroup||(u.FileRecommendWordsGroup={}))[e.defaultFileWords=0]="defaultFileWords",e[e.defaultImageWords=1]="defaultImageWords",e[e.AIPhotoEditing=2]="AIPhotoEditing",e[e.PDFToOthers=3]="PDFToOthers",e[e.WordToOthers=4]="WordToOthers",e[e.TXTToOthers=5]="TXTToOthers",(e=u.FILE_STATUS||(u.FILE_STATUS={}))[e.UNACTIVE=0]="UNACTIVE",e[e.ACTIVE=1]="ACTIVE",e[e.EXPIRED=2]="EXPIRED";var I="https://chat.baidu.com";u.imageAccept=".jpeg, .png, .jpg, .bmp";var c=".pdf, .doc, .docx, .txt, .xls, .xlsx, .csv, .ppt, .pptx",p=(0,n.hitSample)("PC_AI_SEARCH_OLD_CODE")?"":".py, .java, .js, .html, .css, .ts, .c, .cpp, .cc, .h, .go",d=u.imageAccept+", "+c;u.UPLOAD_FILE_TYPE=c+", "+p,u.UPLOAD_IMAGE_TYPE=u.imageAccept,u.UPLOAD_ALL_TYPE=u.UPLOAD_FILE_TYPE+", "+u.UPLOAD_IMAGE_TYPE;r.create=function(n){return(0,k.__awaiter)(this,void 0,void 0,function(){var e;return(0,k.__generator)(this,function(t){switch(t.label){case 0:return(e=null,n.isChatSearch)?(e=n.sdk,[3,3]):[3,1];case 1:return[4,function(){return(0,k.__awaiter)(this,void 0,void 0,function(){return(0,k.__generator)(this,function(t){return[2,new Promise(function(e,n){window.require(["@baiducloud/sdk/dist/baidubce-sdk.bundle.min"],function(t){e(t)},function(t){n(t)})})]})})}()];case 2:e=t.sent(),t.label=3;case 3:return[2,new r(n,e)]}})})},r.prototype.getFile=function(l){return(0,k.__awaiter)(this,void 0,Promise,function(){var s=this;return(0,k.__generator)(this,function(t){return[2,new Promise(function(e,n){try{var t=document.createElement("input"),i=s.options,o=i.type,a=i.maxNum;t.type="file",t.accept="all"===o?d:"image"===o?u.imageAccept:c+", "+p,t.multiple=1<a,t.onchange=function(t){return s.handleFileChange(t,e,n,l)},t.click()}catch(r){n(r)}})]})})},r.prototype.getCouldUploadFiles=function(t){var e=t.filter(function(t){t=t.name.split(".")||[],t=null===t?void 0:t[t.length-1];return t&&(d+", "+p).includes(t.toLocaleLowerCase())});return e.length!==t.length&&this.options.callback({status:E.NOT_AVAILABLE}),e},r.prototype.checkFileValid=function(t){return t.size>1024*this.options.maxSize*1024?(this.options.callback({status:E.FILE_SIZE_EXCEED_LIMIT}),!1):0!==t.size||(this.options.callback({status:E.FILE_SIZE_BELOW_LIMIT}),!1)},r.prototype.filterInvalidFile=function(t,e){var n=this.getCouldUploadFiles(t);if(!e||e(n)){n.length>this.options.maxNum&&(this.options.callback({status:E.FILE_NUM_EXCEED_LIMIT}),n.splice(this.options.maxNum)),this.options.callback({status:E.SET_FILE_NUM,num:n.length});for(var i=n.length-1;0<=i;i--)this.checkFileValid(n[i])||n.splice(i,1);return n}},r.prototype.handleFileChange=function(i,o,a,r){return(0,k.__awaiter)(this,void 0,Promise,function(){var e,n=this;return(0,k.__generator)(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),e=null==i?void 0:i.target,e=Array.from(e.files||[]),e=this.filterInvalidFile(e,r),[4,Promise.all(e.map(function(t,e){return n.uploadFile(t,e)}))];case 1:return t.sent(),o(),[3,3];case 2:return e=t.sent(),a(e),[3,3];case 3:return[2]}})})},r.prototype.uploadFiles=function(t){var n=this;return Promise.all(this.filterInvalidFile(t).map(function(t,e){return n.uploadFile(t,e)}))},r.prototype.uploadFile=function(h,g){return void 0===g&&(g=0),(0,k.__awaiter)(this,void 0,Promise,function(){var d,e=this;return(0,k.__generator)(this,function(t){return d=Date.now()+g+function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789_",e="",n=new Uint8Array(6);crypto.getRandomValues(n);for(var i=0;i<6;i++)e+=t[n[i]%t.length];return e}(),this.options.callback({status:E.INIT,progress:0,fileInfo:{fileName:h.name,fileType:h.type,fileSize:h.size,fileIndex:g,fileToken:d}}),[2,new Promise(function(c,p){return(0,k.__awaiter)(e,void 0,void 0,function(){var e,n,i,o,a,r,s,l,u=this;return(0,k.__generator)(this,function(t){switch(t.label){case 0:return(t.trys.push([0,5,,6]),h)?(this.files||(this.files=[]),this.files.push({file:h,fileToken:d}),this.sdk||navigator.onLine||this.options.callback({status:E.NETWORK_ERROR,fileInfo:{fileIndex:g,fileToken:d}}),[4,this.getSts()]):[2];case 1:return a=t.sent(),e=a.ak,n=a.sk,i=a.token,o=a.preFixPath,a=a.recommendWord,this.options.callback({status:E.STSSUCCESS,progress:0,fileInfo:{fileName:h.name,fileType:h.type,fileSize:h.size,fileIndex:g,fileToken:d},recommendWord:a}),h instanceof File&&h.type.startsWith("image/")?[4,this.getImageInfo(h)]:[3,3];case 2:r=t.sent(),this.options.callback({status:E.IMAGE_INFO_SUCCESS,progress:0,fileInfo:{imageWidth:r.width,imageHeight:r.height}}),t.label=3;case 3:return r=this.sdk.BosClient,s=new r({endpoint:"https://aisearch.bj.bcebos.com",credentials:{ak:e,sk:n},sessionToken:i}),r=null===(l=h.name)||void 0===l?void 0:l.split(".").pop(),l=this.sdk.MimeType.guess(r),r=d+"."+r,l.startsWith("text/")&&(l+="; charset=UTF-8"),[4,s.putSuperObject({bucketName:"aisearch",objectName:o+r,chunkSize:1048576,ContentLength:h.size,ContentType:l,data:h,onProgress:function(t){t=t.progress;u.options.callback({status:E.UPLOADING,progress:t,fileInfo:{fileIndex:g,fileToken:d}})},onStateChange:function(r,s){return(0,k.__awaiter)(u,void 0,void 0,function(){var e,n,i,o,a;return(0,k.__generator)(this,function(t){switch(t.label){case 0:if("completed"!==r)return[3,7];t.label=1;case 1:return t.trys.push([1,5,,6]),this.options.callback({status:E.UPLOADING,progress:1,fileInfo:{fileIndex:g,fileToken:d}}),e=s.data.key,n=btoa(e.split("/").pop()),[4,this.upLoadConfirm({path:e,size:h.size,name:h.name,id:n,type:"all"===this.options.type?h.type.startsWith("image/")?"image":"file":this.options.type},g)];case 2:return i=t.sent().file_url,this.options.callback({status:E.BOS_SUCCESS,progress:1,fileInfo:{fileIndex:g,fileId:n,fileUrl:i,filePath:e,fileToken:d}}),!this.options.knowledgeId||this.preventUploadSet.has(d)?[3,4]:[4,this.getUploadKnowledgeStatus(n)];case 3:t.sent(),this.options.callback({status:E.KNOWLEDGE_SUCCESS,fileInfo:{fileToken:d,fileUrl:i}}),t.label=4;case 4:return c(),[3,6];case 5:return a=t.sent(),a=(null==(o=a)?void 0:o.status)||E.NETWORK_ERROR,this.options.callback({status:a,fileInfo:{fileIndex:g,fileToken:d}}),p(o),[3,6];case 6:return[3,8];case 7:"failed"===r&&(this.options.callback({status:E.NETWORK_ERROR,fileInfo:{fileIndex:g,fileToken:d}}),p(new Error("Network disconnected"))),t.label=8;case 8:return[2]}})})}}).start()];case 4:return t.sent(),[3,6];case 5:return l=t.sent(),l=(null==(s=l)?void 0:s.status)||E.NETWORK_ERROR,this.options.callback({status:l,fileInfo:{fileIndex:g,fileToken:d}}),p(s),[3,6];case 6:return[2]}})})})]})})},r.prototype.reTryUpload=function(n){return(0,k.__awaiter)(this,void 0,void 0,function(){var e;return(0,k.__generator)(this,function(t){switch(t.label){case 0:return(e=this.files||[],e=e.find(function(t){return t.fileToken===n}))?(this.options.callback({status:E.FILE_REUPLOAD,fileInfo:{fileToken:n}}),[4,this.uploadFile(e.file,0)]):[3,2];case 1:return[2,t.sent()];case 2:return[2,Promise.resolve()]}})})},r.prototype.getSts=function(){return(0,k.__awaiter)(this,void 0,Promise,function(){var e=this;return(0,k.__generator)(this,function(t){return[2,new Promise(function(i,o){return(0,k.__awaiter)(e,void 0,void 0,function(){var e,n;return(0,k.__generator)(this,function(t){switch(t.label){case 0:return t.trys.push([0,3,,4]),e=(this.options.sseHost||I)+a+("?tk="+this.options.token)+(this.options.knowledgeId?"&knowledgeId="+this.options.knowledgeId:""),[4,fetch(e,{mode:"cors",credentials:"include"})];case 1:return(n=t.sent()).ok||o({status:E.NETWORK_ERROR}),[4,n.json()];case 2:return 0===(n=t.sent()).status?i(n.data):o({status:E.NETWORK_ERROR}),[3,4];case 3:return t.sent(),o({status:E.NETWORK_ERROR}),[3,4];case 4:return[2]}})})})]})})},r.prototype.getUploadData=function(n,i,o){return(0,k.__awaiter)(this,void 0,void 0,function(){var e;return(0,k.__generator)(this,function(t){switch(t.label){case 0:return e=(this.options.sseHost||I)+s+"?tk="+i,[4,fetch(e,{method:"POST",credentials:"include",signal:o?o.signal:null,headers:{"Content-Type":"application/json"},body:JSON.stringify(Object.assign({},this.options.uploadBody,this.options.knowledgeId?{knowledgeId:this.options.knowledgeId}:{},this.options.dirId?{dirId:this.options.dirId}:{},this.options.scene?{scene:this.options.scene}:{},n))})];case 1:return[4,t.sent().json()];case 2:return[2,t.sent()]}})})},r.prototype.upLoadConfirm=function(a,r){return(0,k.__awaiter)(this,void 0,Promise,function(){var e=this;return(0,k.__generator)(this,function(t){return[2,new Promise(function(i,o){return(0,k.__awaiter)(e,void 0,void 0,function(){var e,n;return(0,k.__generator)(this,function(t){switch(t.label){case 0:return t.trys.push([0,3,,4]),n=(this.options.sseHost||I)+s+("?tk="+this.options.token),[4,fetch(n,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(Object.assign({},a,this.options.uploadBody,this.options.knowledgeId?{knowledgeId:this.options.knowledgeId,sort:r}:{}))})];case 1:return[4,t.sent().json()];case 2:if(e=t.sent(),e=(n=e||{}).status,n=n.data,0===e)i(n);else if(-5===e)o({status:E.RISK_DENY});else{if(-1===e)throw{status:E.NETWORK_ERROR};o({status:E.NETWORK_ERROR})}return[3,4];case 3:return t.sent(),o({status:E.NETWORK_ERROR}),[3,4];case 4:return[2]}})})})]})})},r.prototype.loop=function(){return(0,k.__awaiter)(this,void 0,void 0,function(){var i,o,a,r,s,l,u,c,p,d,h,g,f,m,v,b,w,y,x,_,S,C=this;return(0,k.__generator)(this,function(t){switch(t.label){case 0:if(!this.uploadMap.size)return[2];i=1e3,o=Date.now();try{for(a=(0,k.__values)(Array.from(this.uploadMap.keys())),r=a.next();!r.done;r=a.next())m=r.value,(v=this.uploadMap.get(m))&&(s=(0,k.__read)(v,3),l=s[0],w=s[2],1e4+i<o-l&&(w({status:E.KNOWLEDGE_ERROR}),this.uploadMap["delete"](m)))}catch(e){y={error:e}}finally{try{r&&!r.done&&(x=a["return"])&&x.call(a)}finally{if(y)throw y.error}}u=Array.from(this.uploadMap.keys()),t.label=1;case 1:return t.trys.push([1,4,5,6]),c=""+(this.options.sseHost||I)+T+"?knowledgeId="+this.options.knowledgeId+"&fids="+u.join(",")+"&tk="+this.options.token,[4,fetch(c)];case 2:return[4,t.sent().json()];case 3:for(m in c=t.sent(),p=c.data.data)(v=this.uploadMap.get(m))&&(d=(0,k.__read)(v,3),h=d[1],w=d[2],1===p[m]?h():w({status:E.KNOWLEDGE_ERROR}),this.uploadMap["delete"](m));return[3,6];case 4:t.sent();try{for(g=(0,k.__values)(u),f=g.next();!f.done;f=g.next())m=f.value,(v=this.uploadMap.get(m))&&(b=(0,k.__read)(v,3),(w=b[2])({status:E.KNOWLEDGE_ERROR}),this.uploadMap["delete"](m))}catch(n){_={error:n}}finally{try{f&&!f.done&&(S=g["return"])&&S.call(g)}finally{if(_)throw _.error}}return[3,6];case 5:return this.uploadMap.size?setTimeout(function(){return C.loop()},i):this.inLoop=!1,[7];case 6:return[2]}})})},r.prototype.getUploadKnowledgeStatus=function(o){return(0,k.__awaiter)(this,void 0,void 0,function(){var i=this;return(0,k.__generator)(this,function(t){return[2,new Promise(function(e,n){return(0,k.__awaiter)(i,void 0,void 0,function(){return(0,k.__generator)(this,function(t){return this.uploadMap.set(o,[Date.now(),e,n]),this.inLoop||(this.inLoop=!0,this.loop()),[2]})})})]})})},r.deleteFile=function(a,r,s){return(0,k.__awaiter)(this,void 0,void 0,function(){var e,n,i,o;return(0,k.__generator)(this,function(t){switch(t.label){case 0:return t.trys.push([0,3,,4]),e=r.sseHost,o=r.knowledgeId,n=r.fileId,i=r.fileToken,o=""+(e||I)+l+"?knowledgeId="+o+"&fileId="+n+"&tk="+r.token,a&&(a.uploadMap["delete"](n),i&&a.preventUploadSet.add(i)),n?[4,fetch(o)]:[3,2];case 1:t.sent(),s&&s(),t.label=2;case 2:return[3,4];case 3:return t.sent(),[3,4];case 4:return[2]}})})},r.prototype.getImageInfo=function(o){return(0,k.__awaiter)(this,void 0,Promise,function(){return(0,k.__generator)(this,function(t){return[2,new Promise(function(t,e){var n=new FileReader,i=new Image;n.onload=function(t){i.src=t.target.result},i.onload=function(){t({width:i.width,height:i.height})},i.onerror=function(){e(new Error("图片加载失败"))},n.onerror=function(){e(new Error("文件读取失败"))},n.readAsDataURL(o)})]})})},n=r;function r(t,e){this.files=[],this.inLoop=!1,this.preventUploadSet=new Set,this.uploadMap=new Map,this.options=t,this.sdk=e}u.UploadFile=n},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e){t.exports=' <div class="{{$style[\'chat-input-background\']}}"> <div id="input-root" style="height: {{rootHeight}}px"> <chat-input initial-row="{{2}}" ai-placeholder="{{guideWord}}" initial-focus> <div slot="top-band"> <file-container s-if="{{(!isPCSingleFileSample || isPCSingleFileSample && isHome)\n                        && activeFile && fileList && fileList.length}}" file-list="{{fileList}}" upload-file-max-num="{{uploadFileMaxNum}}" cur-upload-type="{{curUploadType}}" on-show-delete="handleFileContainerLog" on-add-file-log="handleAddFileLog"></file-container> <file-guide s-if="{{!isPCSingleFileSample && activeFile && showFileGuide}}" file-guide-words="{{fileGuideWords}}" file-list="{{fileList}}" cur-upload-type="{{curUploadType}}" on-send-file-query="handleFileQuery" on-add-file-log="handleAddFileLog"></file-guide> </div> <div s-if="{{isRenderLeftTool}}" slot="left-tool" class="{{$style[\'left-tool\']}}"> <cs-numero-button s-if="numeroButtonData.length" s-ref="numeroButton" numero-button-data="{{numeroButtonData}}" open-panel-type="{{openPanelType}}"></cs-numero-button> <cs-music-button s-if="musicButtonData.length" s-ref="musicButton" music-button-data="{{musicButtonData}}" music-button-active-value="{=musicButtonActiveValue=}" music-place-holder="{=musicPlaceHolder=}" open-panel-type="{{openPanelType}}"></cs-music-button> <cs-draw-button s-if="drawButtonsData.length" s-ref="drawButton" draw-buttons-data="{{drawButtonsData}}" on-add-input-content="handleAddInputContent" open-panel-type="{{openPanelType}}"></cs-draw-button> <d-tooltip s-if="{{!numeroButtonData.length && !drawButtonsData.length && !musicButtonData.length}}" content="{{isAiSearch ? \'\' : hoverText.deepSearch}}" init-content="{{hoverText.askAiGuide}}" button-tips-days="{{buttonTipsDays}}" on-hover="handleDeepsearchHover" top="48" max-width="350" anchor="left"> <div s-ref="ai-search-btn" class="{{$style[\'aisearch-btn\']}} {{isAiSearch && !jumpDsBtnSample ? $style[\'aisearch-btn-active\']: $style[\'aisearch-btn-deactive\']}} {{jumpDsBtnSample ? $style[\'jump-btn\'] : $style[\'weak-svg\']}}" data-spy-count="jump-btn-click" on-click="handleClickAiSearch($event)" on-mouseenter="showAiBtnHover" on-mouseleave="hideAiBtnHover"> <img s-if="{{jumpDsBtnSample && buttonText.usePreImage && buttonText.preImageType === \'search\'}}" src="https://psstatic.cdn.bcebos.com/multimode/search_1760511039000.svg"> <svg s-else-if="{{buttonText.usePreImage && buttonText.preImageType === \'wenai\'}}" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18" fill="currentColor"> <path d="M9.35022 1C9.95062 1 10.5348 1.07134 11.0953 1.20215L10.9371 1.60449L9.23206 2.27734C5.76587 2.34054 2.97522 5.16693 2.97522 8.64746C2.97522 9.5194 3.15036 10.2454 3.32581 10.7539C3.41335 11.0077 3.50003 11.2063 3.56409 11.3398C3.59601 11.4064 3.62299 11.4569 3.64124 11.4912C3.64941 11.5066 3.65598 11.5187 3.66174 11.5293L3.6637 11.5332L3.67542 11.5537C3.67724 11.5572 3.68135 11.5653 3.68616 11.5752C3.68758 11.5781 3.68933 11.583 3.69202 11.5889L3.6969 11.5977C3.69841 11.6005 3.70003 11.6041 3.70178 11.6074C3.70452 11.6126 3.70834 11.6189 3.71155 11.625C3.73338 11.6668 3.76369 11.7275 3.79749 11.8018C3.86422 11.9484 3.94725 12.1575 4.00061 12.4014C4.00765 12.4336 4.0146 12.4647 4.02112 12.4941C4.09124 12.811 4.13046 12.9902 4.13049 13.4395C4.13049 13.7122 4.06465 14.1884 3.93323 14.6572C3.90089 14.7726 3.86175 14.8977 3.81506 15.0254L9.35022 15.0234C12.8319 15.0234 15.6593 12.2325 15.7213 8.76562L16.3932 7.06055L16.7965 6.90137C16.9278 7.46297 16.9996 8.04779 16.9996 8.64941C16.9996 12.874 13.5748 16.2988 9.35022 16.2988L2.76624 16.2998C2.42272 16.2997 2.19847 16.0579 2.12756 15.8271C2.06032 15.6082 2.10261 15.33 2.31213 15.1348C2.44224 15.0134 2.59138 14.7212 2.70569 14.3135C2.8144 13.9257 2.85608 13.5677 2.85608 13.4395C2.85606 13.1291 2.83844 13.0529 2.77698 12.7754C2.77009 12.7443 2.76257 12.7106 2.75452 12.6738C2.72644 12.5455 2.68054 12.425 2.63733 12.3301C2.61619 12.2836 2.59618 12.2445 2.58069 12.2148L2.55823 12.1719C2.55498 12.1657 2.54938 12.1545 2.54358 12.1426C2.54264 12.1407 2.54099 12.1385 2.53967 12.1357C2.53768 12.1321 2.53538 12.1278 2.53284 12.123C2.52796 12.114 2.5227 12.103 2.51624 12.0908C2.49119 12.0438 2.45577 11.9763 2.41467 11.8906C2.33266 11.7196 2.22635 11.476 2.12073 11.1699C1.90961 10.5579 1.69983 9.68977 1.69983 8.64746C1.69983 4.4226 5.12616 1.00023 9.35022 1ZM13.3932 1.35254C13.4911 1.10469 13.8422 1.10463 13.9401 1.35254L14.6588 3.17578C14.6887 3.2514 14.7492 3.31098 14.8248 3.34082L16.6471 4.05957C16.8952 4.15741 16.8951 4.50854 16.6471 4.60645L14.8248 5.3252C14.7491 5.35507 14.6887 5.41546 14.6588 5.49121L13.9401 7.31348C13.8422 7.56158 13.491 7.56158 13.3932 7.31348L12.6744 5.49121C12.6446 5.41546 12.5842 5.35507 12.5084 5.3252L10.6862 4.60645C10.4381 4.5086 10.4381 4.15742 10.6862 4.05957L12.5084 3.34082C12.5841 3.31097 12.6445 3.25144 12.6744 3.17578L13.3932 1.35254Z"/> </svg> <img s-else-if="newInputStyle" class="{{$style[\'new-input-img\']}}" src="https://psstatic.cdn.bcebos.com/aife/superman/ai_1758798670000.svg"> <span class="{{$style[\'ds-btn\']}}"> <span s-if="buttonText.text === \'AI搜索\'" style="margin-left: 3px">搜索</span> <fragment s-if="buttonText.text === \'问AI\'"> <img s-if="jumpDsBtnSample" src="https://psstatic.cdn.bcebos.com/aife/static/wenAI_1761814195000.png"> <fragment s-else> <svg s-show="{{!isAiSearch}}" xmlns="http://www.w3.org/2000/svg" width="25" height="14" viewBox="0 0 25 14" fill="currentColor"> <path d="M6.6394 1.91357C7.11595 1.91371 7.54284 2.20937 7.70972 2.65576L11.3914 12.5044C11.4378 12.6293 11.345 12.7622 11.2117 12.7622H9.4021C9.17216 12.7622 8.96654 12.6187 8.88745 12.4028L6.10913 4.79932C6.05829 4.66017 5.86481 4.65275 5.80347 4.7876L3.31714 10.2515C3.23177 10.4396 3.36935 10.6535 3.57593 10.6538H5.74097C5.99293 10.6538 6.17077 10.9 6.09155 11.1392L5.66479 12.4272C5.59853 12.6271 5.41147 12.7622 5.20093 12.7622H0.786865C0.216078 12.7622 -0.164088 12.1729 0.0710449 11.6528L4.16968 2.58545C4.35454 2.17654 4.76196 1.91371 5.21069 1.91357H6.6394ZM13.2546 5.65967C13.4725 5.65967 13.633 5.65944 13.7595 5.67041C13.8855 5.68134 13.9738 5.7023 14.0476 5.74268C14.1623 5.80541 14.2564 5.90042 14.3191 6.01514C14.3594 6.08895 14.3814 6.17728 14.3923 6.30322C14.4033 6.42977 14.4031 6.59027 14.4031 6.80811V11.6138C14.4031 11.8316 14.4033 11.9921 14.3923 12.1187C14.3814 12.2447 14.3595 12.3329 14.3191 12.4067C14.2564 12.5213 14.1622 12.6155 14.0476 12.6782C13.9738 12.7186 13.8855 12.7405 13.7595 12.7515C13.633 12.7624 13.4725 12.7622 13.2546 12.7622C13.0365 12.7622 12.8754 12.7624 12.7488 12.7515C12.6228 12.7405 12.5345 12.7186 12.4607 12.6782C12.3461 12.6155 12.2519 12.5213 12.1892 12.4067C12.1488 12.3329 12.1269 12.2447 12.116 12.1187C12.105 11.9921 12.1052 11.8316 12.1052 11.6138V6.80811C12.1052 6.59028 12.105 6.42977 12.116 6.30322C12.1269 6.17728 12.1489 6.08895 12.1892 6.01514C12.2519 5.90042 12.346 5.80541 12.4607 5.74268C12.5345 5.7023 12.6228 5.68134 12.7488 5.67041C12.8754 5.65943 13.0365 5.65967 13.2546 5.65967ZM20.7683 3.35498C20.8429 3.35772 20.8959 3.39383 20.9197 3.4126C20.9475 3.43453 20.9698 3.46038 20.9871 3.48193C21.0221 3.52557 21.0575 3.58062 21.0906 3.63916C21.1579 3.75824 21.2355 3.92064 21.3162 4.10107C21.4779 4.46259 21.6619 4.92096 21.8191 5.31104L21.8201 5.31299C21.9454 5.62394 22.0502 5.88442 22.115 6.02783C22.2458 6.08741 22.4735 6.18078 22.7488 6.29443L22.7517 6.29541C23.1448 6.45766 23.6218 6.65547 24.0007 6.83057C24.1898 6.91795 24.3609 7.00248 24.4861 7.07666C24.5477 7.11318 24.6066 7.1516 24.6521 7.19092C24.6746 7.21033 24.7005 7.23597 24.7224 7.26709C24.7423 7.29534 24.7756 7.35176 24.7732 7.42725C24.7708 7.50157 24.7345 7.55437 24.7156 7.57861C24.6938 7.60655 24.6687 7.62957 24.6472 7.64697C24.6036 7.68228 24.5475 7.7173 24.489 7.75049C24.3702 7.81787 24.2088 7.89547 24.0291 7.97607C23.6687 8.13764 23.2122 8.32235 22.824 8.479L22.821 8.47998C22.514 8.60389 22.2573 8.70762 22.115 8.77197C22.0546 8.90435 21.9589 9.13552 21.8435 9.41455L21.8425 9.4165C21.6798 9.80993 21.4827 10.2866 21.3083 10.6646C21.2214 10.853 21.1374 11.0233 21.0642 11.1479C21.0283 11.2091 20.9901 11.2668 20.9519 11.312C20.9329 11.3344 20.9079 11.3613 20.8777 11.3833C20.8508 11.4029 20.795 11.437 20.7195 11.436C20.6451 11.4351 20.5917 11.3997 20.5662 11.3804C20.5372 11.3585 20.5127 11.3337 20.4949 11.312C20.4587 11.2681 20.4239 11.2116 20.3904 11.1528C20.3222 11.0334 20.2438 10.8707 20.1628 10.6899C20.0006 10.3275 19.8163 9.86782 19.6599 9.47803L19.6589 9.4751C19.536 9.16878 19.4328 8.91376 19.3689 8.77197C19.2188 8.70466 18.9416 8.59463 18.6121 8.46436L18.6101 8.46338C18.2226 8.3102 17.7745 8.13318 17.4226 7.979C17.2471 7.90209 17.0901 7.82807 16.9744 7.76416C16.9174 7.73269 16.8628 7.69995 16.8201 7.6665C16.799 7.65002 16.7745 7.62779 16.7527 7.60107C16.7343 7.57849 16.6965 7.52737 16.6921 7.45361C16.6877 7.37742 16.7198 7.31937 16.74 7.28955C16.762 7.25716 16.7884 7.23064 16.8113 7.21045C16.8576 7.16964 16.9173 7.12908 16.9802 7.09131C17.1082 7.01451 17.2838 6.92748 17.4773 6.8374C17.865 6.65694 18.3525 6.45429 18.7498 6.28955L18.7527 6.28857C19.0207 6.17744 19.241 6.08611 19.3689 6.02783C19.4292 5.89507 19.5248 5.66164 19.6404 5.37939L19.6414 5.37646C19.803 4.98151 19.9989 4.50411 20.1726 4.12549C20.2592 3.93666 20.3431 3.76602 20.4167 3.64111C20.453 3.57963 20.4917 3.52062 20.531 3.4751C20.5504 3.45267 20.576 3.42669 20.6072 3.40479C20.6357 3.3848 20.6927 3.35229 20.7683 3.35498ZM13.1843 1.29053C14.0121 1.29066 14.6831 1.96179 14.6833 2.78955C14.6833 3.61748 14.0122 4.28942 13.1843 4.28955C12.3563 4.28955 11.6853 3.61757 11.6853 2.78955C11.6855 1.96171 12.3564 1.29053 13.1843 1.29053Z" fill="currentColor"/> </svg> <img s-show="{{isAiSearch}}" src="https://gips2.baidu.com/it/u=203573231,3751676420&fm=3028&app=3028&f=PNG&fmt=auto&q=100&size=f75_42"> </fragment> </fragment> </span> <border-animation-svg s-ref="border-animation" class="{{$style[\'ai-search-btn-svg\']}}" hoverAnimationId="left_ds_btn_border_svg_hover" width="{{aiSearchWidth}}" height="{{aiSearchHeight}}" border-radius="12" padding="2" stroke-width="{{isAiSearch ? 0 : 1}}" liner-color-config="{{linerColorConfig}}"></border-animation-svg> </div> </d-tooltip> <div s-show="{{isShowOverWordTip}}" class="{{$style[\'overword-tip\']}}"> 👈 复杂问题文心助手回答更优 </div> </div> <div slot="right-tool" class="{{$style[\'right-tool\']}} {{!isShowFileUpload && !isShowMic ? $style[\'right-tool-no-margin\'] : \'\'}}"> <d-tooltip s-if="{{isShowFileUpload}}" content="{{(!isPCSingleFileSample && curUploadType && curUploadType !== \'file\')\n                            ? hoverText.mergeText : (!isPCSingleFileSample && fileList.length >= uploadFileMaxNum\n                            ? hoverText.fullFile : hoverText.defaultFile)}}" maxWidth="320"> <div on-click="handleClickUploadFile(\'file\', null, \'\', $event)" class="{{$style[\'tool-item\']}} {{!isPCSingleFileSample && ((curUploadType && curUploadType !== \'file\') || fileList.length >= uploadFileMaxNum) ? $style[\'upload-btn-disabled\'] : \'\'}}"> <img s-if="newInputStyle" src="https://psstatic.cdn.bcebos.com/aife/superman/file_1758798674000.svg"> <svg s-else="" width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"> <path d="M11.4405 5.94065L7.25022 10.1309C6.52703 10.8541 6.52703 12.0266 7.25022 12.7498C7.97342 13.473 9.14595 13.473 9.86914 12.7498L11.3095 11.3094L14.0594 8.55957L14.7141 7.90484C16.1605 6.45845 16.1605 4.1134 14.7141 2.66701C13.2677 1.22062 10.9227 1.22062 9.4763 2.66701L3.97658 8.16673C1.807 10.3363 1.807 13.8539 3.97658 16.0235C6.14616 18.1931 9.66374 18.193 11.8333 16.0235L16.6783 11.1785" stroke="currentColor" stroke-width="1.6"/> </svg> </div> </d-tooltip> <d-tooltip s-if="{{isShowFileUpload}}" content="{{(!isPCSingleFileSample && curUploadType && curUploadType !== \'image\')\n                            ? hoverText.mergeText : (!isPCSingleFileSample && fileList.length >= uploadFileMaxNum\n                            ? hoverText.fullPic : hoverText.defaultPic)}}"> <div on-click="handleClickUploadFile(\'image\', null, \'\', $event)" class="{{$style[\'tool-item\']}} {{!isPCSingleFileSample && ((curUploadType && curUploadType !== \'image\') || fileList.length >= uploadFileMaxNum) ? $style[\'upload-btn-disabled\'] : \'\'}}"> <img s-if="newInputStyle" src="https://psstatic.cdn.bcebos.com/aife/superman/image_1758798679000.svg"> <svg s-else="" width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"> <path d="M1.85278 4.81463C1.85278 3.58733 2.84771 2.59241 4.07501 2.59241H15.9269C17.1542 2.59241 18.1491 3.58733 18.1491 4.81463V15.185C18.1491 16.4123 17.1542 17.4072 15.9269 17.4072H4.075C2.8477 17.4072 1.85278 16.4123 1.85278 15.185V4.81463Z" stroke="currentColor" stroke-width="1.6"/> <circle cx="13.7136" cy="7.14282" r="2.1" fill="currentColor" stroke="white" stroke-width="0.8"/> <path d="M1.85278 14.2326L5.08504 9.72923C5.81909 8.70649 7.25533 8.49716 8.25077 9.26783L17.5001 16.4286" stroke="currentColor" stroke-width="1.6"/> </svg> </div> </d-tooltip> <d-tooltip s-if="{{isShowFileUpload && linkOptions.function}}" content="{{linkOptions.desc}}"> <div class="{{$style[\'tool-item\']}} {{$style[\'weak-svg\']}}" on-click="handleLinkClick"> <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none"> <g clip-path="url(#clip0_1865_9665)"> <path d="M12.6643 3.18171C13.792 2.05399 15.6406 2.05576 16.7933 3.20843C17.9459 4.3611 17.9477 6.20967 16.82 7.33738L14.558 9.59933L15.6056 10.6469L17.8676 8.38495C19.584 6.66851 19.5618 3.88187 17.8408 2.16086C16.1198 0.439864 13.3332 0.417703 11.6168 2.13414L8.36132 5.38958C6.64488 7.10602 6.66704 9.89266 8.38804 11.6137L8.91182 12.1374L9.95938 11.0899L9.4356 10.5661C8.28293 9.41343 8.28117 7.56486 9.40888 6.43714L12.6643 3.18171Z" fill="currentColor"/> <path d="M11.6146 8.19855L11.0909 7.67477L10.0433 8.72234L10.5671 9.24612C11.7197 10.3988 11.7215 12.2474 10.5938 13.3751L7.33836 16.6305C6.21064 17.7582 4.36208 17.7565 3.20941 16.6038C2.05674 15.4511 2.05497 13.6025 3.18269 12.4748L5.44463 10.2129L4.39707 9.16532L2.13512 11.4273C0.41868 13.1437 0.44084 15.9304 2.16184 17.6514C3.88284 19.3724 6.66948 19.3945 8.38592 17.6781L11.6414 14.4226C13.3578 12.7062 13.3356 9.91955 11.6146 8.19855Z" fill="currentColor"/> <path d="M12.6643 3.18171C13.792 2.05399 15.6406 2.05576 16.7933 3.20843C17.9459 4.3611 17.9477 6.20967 16.82 7.33738L14.558 9.59933L15.6056 10.6469L17.8676 8.38495C19.584 6.66851 19.5618 3.88187 17.8408 2.16086C16.1198 0.439864 13.3332 0.417703 11.6168 2.13414L8.36132 5.38958C6.64488 7.10602 6.66704 9.89266 8.38804 11.6137L8.91182 12.1374L9.95938 11.0899L9.4356 10.5661C8.28293 9.41343 8.28117 7.56486 9.40888 6.43714L12.6643 3.18171Z" stroke="currentColor" stroke-width="0.15" stroke-linecap="square"/> <path d="M11.6146 8.19855L11.0909 7.67477L10.0433 8.72234L10.5671 9.24612C11.7197 10.3988 11.7215 12.2474 10.5938 13.3751L7.33836 16.6305C6.21064 17.7582 4.36208 17.7565 3.20941 16.6038C2.05674 15.4511 2.05497 13.6025 3.18269 12.4748L5.44463 10.2129L4.39707 9.16532L2.13512 11.4273C0.41868 13.1437 0.44084 15.9304 2.16184 17.6514C3.88284 19.3724 6.66948 19.3945 8.38592 17.6781L11.6414 14.4226C13.3578 12.7062 13.3356 9.91955 11.6146 8.19855Z" stroke="currentColor" stroke-width="0.15" stroke-linecap="square"/> </g> <defs> <clipPath id="clip0_1865_9665"> <rect width="20" height="20" fill="white"/> </clipPath> </defs> </svg> </div> </d-tooltip> </div> <div slot="chat-input-extension"> <div class="{{$style[\'panel-list\']}}"> <panel-btn s-for="panel, pindex in visibleButtons" panel="{{panel}}" pos="{{pindex + 1}}" area="base" func-recommend-sample="{{funcRecommendSample}}" query-recommend-sample="{{queryRecommendSample}}" btn-text-sample="{{btnTextSample}}" btn-img-sample="{{btnImgSample}}" btn-try-sample="{{btnTrySample}}" on-click="handleClickPanelBtn" on-show-log="handlePanelBtnShow"></panel-btn> <drop-down-btn s-if="hiddenButtons.length" wrapper-class="{{$style[\'drop-down-wrapper\']}}" on-mouseover="native:handleDropdownMouseEnter" on-menu-show="handleMoreMenuShow" btn-class="{{$style[\'drop-down-btn\']}} {{showGuideClass}}" menu-wrapper-class="{{$style[\'drop-down-menu-wrapper\']}}" menu-class="{{$style[\'drop-down-menu\']}}"> <panel-btn s-for="panel, pindex in hiddenButtons" s-ref="more-btn-{{panel.type}}" panel="{{panel}}" pos="{{visibleButtons.length + pindex + 1}}" area="capsule_bub_more" func-recommend-sample="{{funcRecommendSample}}" query-recommend-sample="{{queryRecommendSample}}" btn-text-sample="{{btnTextSample}}" btn-img-sample="{{btnImgSample}}" btn-try-sample="{{btnTrySample}}" on-click="handleClickPanelBtn" on-show-log="handlePanelBtnShow"></panel-btn> </drop-down-btn> </div> </div> </chat-input> </div> <d-toast s-ref="toast" message="{{toastMsg}}" duration="{{toastDuration}}"></d-toast> <animation-video s-if="{{isShowOpenningAnime}}"></animation-video> </div> '},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,k=n(1),o=n(0),a=(0,k.__importDefault)(n(350)),g=(0,k.__importDefault)(n(353)),r=n(405),s=(0,k.__importDefault)(n(406)),l=(0,k.__importDefault)(n(411)),u=(0,k.__importStar)(n(420)),c=(0,k.__importDefault)(n(426)),p=(0,k.__importDefault)(n(429)),d=(0,k.__importDefault)(n(432)),h=(0,k.__importDefault)(n(435)),f=(0,k.__importDefault)(n(441)),m=(0,k.__importDefault)(n(447)),v=(0,k.__importDefault)(n(460)),b=(0,k.__importDefault)(n(135)),T=n(42),E=(0,k.__importDefault)(n(41)),w=n(6),y=[],I="https://chat.baidu.com",x={office_create:7,photo_editing:8,ai_ppt:9,ai_read:10,ai_code:11,deep_research:12,ai_music_create:13,ai_numerology:16},n=n(5),n=(i=o.Component,(0,k.__extends)(_,i),_.prototype.initData=function(){return{rootHeight:100,isHome:!0,initialRow:2,isAiSearch:!1,isShowMic:!1,isShowFileUpload:!0,isAiPanelSearch:!1,isShowOpenningAnime:!1,fileItem:null,panelMaxHeight:358,inputPanel:[],guideWordPrefix:"",guideWord:"",isFileUploading:!1,token:"",fileList:[],fileGuideWords:[],toastMsg:"",toastDuration:2e3,hoverText:{},hasShowOverWordToast:!1,ro:null,isOverWord:!1,visibleButtons:[],hiddenButtons:[],showMoreGuide:!1,prefixContent:"",activeFile:!0,uploadFileMaxNum:10,isPCSingleFileSample:1,deepSearchBtnText:"问",isShowAiSearch:!0,numeroButtonData:[],musicButtonData:[],musicButtonActiveValue:[],musicPlaceHolder:"",drawButtonsData:[],numeroTipContent:"测测事业、爱情、财富运势",newInputStyle:!1,funcRecommendSample:!1,queryRecommendSample:!1,btnTextSample:!1,btnImgSample:!1,btnTrySample:!1,buttonTipsDays:[],jumpDsBtnSample:!0,voiceInputComplete:!1,hasUsedVoiceInput:!1,isVoiceRecording:!1,linkOptions:{},linerColorConfig:[{offset:"0%",color:"#fff",opacity:"0.2"},{offset:"60%",color:"#6547FF",opacity:"0.6"},{offset:"95%",color:"#4769FF",opacity:"1"},{offset:"100%",color:"#0090FE",opacity:"1"}],numeroButtonActiveValue:null}},_.prototype.inited=function(){var t=this.data.get("inputPanel").map(function(t){return(0,k.__assign)((0,k.__assign)({},t),"ai_search"===t.type?{minWidth:270}:{})}),e=(0,r.calculateAdaptiveButtonBar)(t,{containerWidth:800,defaultMinWidth:90,buttonGap:9,moreButtonWidth:86}),t=e.visibleButtons,e=e.hiddenButtons;this.data.set("visibleButtons",t),this.data.set("hiddenButtons",e),this.data.get("newInputStyle")&&this.data.set("rootHeight",120)},_.prototype.attached=function(){var d=this;this.checkAnime(),this.handlePopStateCallback=this.handlePopState.bind(this),window.addEventListener("popstate",this.handlePopStateCallback);var h=this.data.get("isPCSingleFileSample");h&&this.data.set("uploadFileMaxNum",1),this.nextTick(function(){d.initSpyCountLogListener();var l,u,t,e,n,i,o,a,r,s,c,p=document.querySelector("#input-root");d.chatInputInstance=new g["default"]({rootDom:p,initialRow:d.data.get("initialRow"),isSsr:!0,initialFocus:!0,hasOpenAnime:!0,panelMaxHeight:d.data.get("panelMaxHeight"),aiPlaceholder:d.data.get("guideWord"),isSingle:!!h,useBuiltInVoice:!0}),d.chatInputInstance.on("panel-close",function(){d.resetStatus(),d.data.get("fileList").length&&d.chatInputInstance.fileUpLoadInput()}),d.chatInputInstance.on("change",function(t){var e=(0,w.$)("#main-wrapper");"normal"===t&&e.length&&e.trigger("smartInputRerender")}),d.chatInputInstance.on("panel-scroll",function(){d.sendUbcLog("slide","function_panel",{})}),d.chatInputInstance.on("prefix-click",function(){d.data.assign({numeroButtonData:[],musicButtonData:[],drawButtonsData:[],numeroButtonActiveValue:null}),d.sendUbcLog("click","search_kuang",{pos:"title_hover"})}),d.chatInputInstance.on("focus",function(){var t=d.data.get("isPCSingleFileSample"),e=d.data.get("isHome");t||e||(d.data.set("activeFile",!0),t||d.chatInputInstance.setPrefixNodeStatus(!1))}),d.chatInputInstance.on("blur",function(){d.chatInputInstance.stopVoiceRecording();var t=d.data.get("isPCSingleFileSample"),e=d.data.get("isHome");t||e||(d.data.set("activeFile",!1),t||d.chatInputInstance.setPrefixNodeStatus(!0))}),d.chatInputInstance.on("ai-tool-change",function(t){t=null==t?void 0:t.panelType;t||d.data.assign({numeroButtonData:[],musicButtonData:[],drawButtonsData:[],numeroButtonActiveValue:null}),d.data.set("openPanelType",t)}),d.chatInputInstance.on("toast",function(t){d.showToast({message:t})}),d.chatInputInstance.on("drag-show",function(){d.sendUbcLog("show","drag_status",{file_status:d.getInputStats(),is_log:window.s_session.isLogin?"1":"0"})}),d.chatInputInstance.on("drag-done",function(t){t=t.fileSuffix;d.sendUbcLog("show","drag_finish_status",{file_type:t,is_log:window.s_session.isLogin?"1":"0"})}),d.chatInputInstance.on("paste-file",function(t){t=t.fileSuffix;d.sendUbcLog("click","copy_finish_status",{file_type:t,is_log:window.bds.comm.isUserLogin?"1":"0"})}),d.chatInputInstance.on("threshold",function(t){d.showToast({message:"最多发送"+t+"字符内容"})}),d.chatInputInstance.on("panel-render",function(t){d.sendPerfSpyLog(d.__startClickPanelTime,"panelRenderTime");var e=d.data.get("isPCSingleFileSample");d.data.set("prefixContent",t.type),d.data.set("isAiPanelSearch",!0),d.resetMic(!1),"ai_chat"!==t.type&&"ai_read"!==t.type&&(d.data.set("isShowFileUpload",!1),e&&d.data.set("fileList",[]))}),d.chatInputInstance.on("input",function(t){"ai"!==d.chatInputInstance.getMode()&&((0,w.$)("#kw").val(t),d.calculateStrIsOverWord(t)?d.data.set("isOverWord",!0):d.data.set("isOverWord",!1),d.nextTick(function(){t&&d.checkSupportIs()}),t||(d.data.assign({voiceInputComplete:!1,hasUsedVoiceInput:!1}),window.bds.comm.isVoice=!1))}),d.chatInputInstance.on("panel-item-click",function(C){return(0,k.__awaiter)(d,void 0,void 0,function(){var n,i,o,a,r,s,l,u,c,p,d,h,g,f,m,v,b,w,y,x,_,S=this;return(0,k.__generator)(this,function(t){switch(t.label){case 0:if(s=C.functionTab,n=void 0===s?"all":s,i=C.functionName,o=C.buttonProperty,a=C.text,m=C.fileInfo,x=C.functionData,r=C.clickType,s=this.chatInputInstance.getCurrentPanelName(),"link"===(null==x?void 0:x.type))return window.location.href=null===(x=null===(x=x.data)||void 0===x?void 0:x.link)||void 0===x?void 0:x.url,[2];if(this.sendUbcLog("click","function_panel",{function_tab:n,function_name:i}),"ai_read"===s&&this.data.set("fileList",[]),o&&this.data.set("musicButtonActiveValue",o),this.chatInputInstance.addAiInputContent(C),"photo_editing"===s&&"pic-tool"===r&&this.ref("drawButton").handleDrawButtonsSettings({type:"change",drawStyle:{style:a}}),"ai_read"!==s||null==m||!m.file_path)return[3,3];l=function(t){var e=(S.data.get("fileList")||[])[0];return(null==e?void 0:e.filePath)===(null==t?void 0:t.filePath)?e:{}},clearTimeout(this.mockReadProgressTimer),u={};try{for(c=(0,k.__values)(Object.entries(m)),p=c.next();!p.done;p=c.next())d=(0,k.__read)(p.value,2),h=d[0],g=d[1],f=h.replace(/_([a-z])/g,function(t,e){return e.toUpperCase()}),u[f]=g}catch(e){w={error:e}}finally{try{p&&!p.done&&(y=c["return"])&&y.call(c)}finally{if(w)throw w.error}}return m=[(0,k.__assign)((0,k.__assign)({},u),{fileSize:Number(u.fileSize),status:1,fileType:(0,T.getFileType)(u.fileName),uploadType:u.fileType,progress:0})],this.data.set("fileList",m),this.mockReadProgressTimer=setTimeout(function(){var t=l(u);1===t.status&&(S.data.set("fileList",[(0,k.__assign)((0,k.__assign)({},t),{progress:+(.3*Math.random()+.2).toFixed(2)})]),S.mockReadProgressTimer=null)},100),[4,T.UploadFile.create({type:u.fileType,maxSize:50,token:this.getToken(),sseHost:I})];case 1:return b=t.sent(),v={id:E["default"].encode((null===(_=u.filePath)||void 0===_?void 0:_.split("/").pop())||""),name:u.fileName,path:u.filePath,size:Number(u.fileSize),type:u.fileType,rw:"1"},[4,b.getUploadData(v,this.getToken())];case 2:_=t.sent().data,v=_.id,b=_.file_url,_=_.recommend_word,b=[(0,k.__assign)((0,k.__assign)({},u),{fileId:v,status:2,url:b,uploadType:u.fileType,fileSize:Number(u.fileSize),fileType:(0,T.getFileType)(u.fileName)})],1===l(u).status&&(_&&this.data.set("fileGuideWords",this.handleFileGuideWords(u.fileType,_)),this.data.set("fileList",b)),t.label=3;case 3:return[2]}})})}),d.chatInputInstance.on("panel-item-upload",d.handleClickUploadFile.bind(d)),d.chatInputInstance.on("prefix-file-click-delete",function(){d.handleFileContainerLog({type:"click",value:"file_clear"}),d.handleFileRemove()}),d.chatInputInstance.on("prefix-file-back-delete",function(){d.data.set("fileList",[])}),d.chatInputInstance.on("prefix-back-delete",function(){d.data.set("numeroButtonData",[]),d.data.set("musicButtonData",[]),d.data.set("drawButtonsData",[])}),d.chatInputInstance.on("clear",function(){d.data.set("isOverWord",!1),d.sendUbcLog("click","content_clear"),d.data.assign({voiceInputComplete:!1,hasUsedVoiceInput:!1}),window.bds.comm.isVoice=!1}),d.chatInputInstance.on("click",function(t){t=(null==t?void 0:t.value)||"";d.sendUbcLog("click","search_kuang",{query:t,is_query_over:d.calculateStrIsOverWord(t)?"1":"0",pos:"searchbox"})}),d.chatInputInstance.on("submit",d.handleSubmit.bind(d)),d.chatInputInstance.on("submit",function(){d.sendCountSpyLog({submit_click:1})}),d.chatInputInstance.on("voice-input-start",function(){window.bds.comm.isVoice=!0;var t=d.chatInputInstance.getValue();d.sendUbcLog("click","search_kuang",{pos:"voice",query:t,is_query_over:d.calculateStrIsOverWord(t)?"1":"0",voice_time:0,voice_content:"",button_goal_status:"open",file_status:d.getInputStats(),aisou_btn:d.data.get("isAiSearch")?"1":"0"}),d.data.assign({voiceInputComplete:!1,isVoiceRecording:!0,hasUsedVoiceInput:!0})}),d.chatInputInstance.on("voice-input-recognized",function(){window.bds.comm.isVoice=!0}),d.chatInputInstance.on("voice-input-complete",function(t){var e=t.content,n=t.duration,t=d.chatInputInstance.getValue();d.sendUbcLog("click","search_kuang",{pos:"voice",query:t,is_query_over:d.calculateStrIsOverWord(t)?"1":"0",voice_time:n,voice_content:e,button_goal_status:"close",file_status:d.getInputStats(),aisou_btn:d.data.get("isAiSearch")?"1":"0"}),d.data.assign({voiceInputComplete:!0,isVoiceRecording:!1})}),p&&(l=p.querySelector(".tools-clear-icon"),u=l.classList.contains("show-clear-icon"),l&&new MutationObserver(function(t){var e,n;try{for(var i=(0,k.__values)(t),o=i.next();!o.done;o=i.next()){var a,r=o.value;"attributes"!==r.type||"class"!==r.attributeName||(a=l.classList.contains("show-clear-icon"))!==u&&(u=a)&&d.sendUbcLog("show","content_clear")}}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i["return"])&&n.call(i)}finally{if(e)throw e.error}}}).observe(l,{attributes:!0,attributeFilter:["class"]}),d.watch("isAiSearch",function(t){var e,n,i=p.querySelector("#chat-textarea");i&&!d.data.get("jumpDsBtnSample")&&(i=t?null!==(e=i.dataset.aiPlaceholder)&&void 0!==e?e:"":null!==(n=i.dataset.normalPlaceholder)&&void 0!==n?n:"",n=d.data.get("guideWordPrefix"),d.chatInputInstance.setPlaceHolder(t&&n?n+i:i),d.resetMic(!t))}),d.watch("prefixContent",function(t,e){var n=e.oldValue,e=e.newValue.trim(),n=n.trim();"ai_read"===e?d.data.set("activeFile",!0):e?d.data.set("activeFile",!1):n&&d.data.set("activeFile",!0)}),d.watch("curUploadType",function(t){var e=d.data.get("isPCSingleFileSample");d.updatePanelExternalProps({curUploadType:e?"":t})}),d.watch("fileList",function(t,e){var n=e.oldValue,i=e.newValue;d.data.get("isPCSingleFileSample")||n.length===i.length||(e=d.data.get("fileReady"),i.length&&d.chatInputInstance.renderAiInputFilePrefix(i[0],i.length,2!==e),n.length&&!i.length&&(d.chatInputInstance.deletePrefixFile(),d.chatInputInstance.getCurrentPanelName()||(i=d.chatInputInstance.getValue(),d.calculateStrIsOverWord(i)&&d.data.set("isOverWord",!0))))}),(a=(0,w.$)("#chat-input-main")).length&&a.on("homepredict",function(){d.chatInputInstance.setInitalRow(1),d.data.set("isHome",!1),d.data.set("initialRow",1)}),t=(0,w.$)('[tpl="ai-tools-panel"]'),e=(0,w.$)('[tpl="dashboard"]'),n=t.length||e.length?72:0,i=p.querySelector(".chat-input-container"),o=document.querySelector("#head_wrapper"),a=document.querySelector(".smart_input_height_superman"),r=!0,s=t.length||e.length?"24%":a?"35%":"39%",i&&"undefined"!=typeof ResizeObserver&&o&&(null!=(c=new ResizeObserver(function(){var t;null!==(t=null===(t=window.bds)||void 0===t?void 0:t.comm)&&void 0!==t&&t.ishome&&!r&&(t=i.clientHeight+(d.data.get("newInputStyle")?2:3),d.data.set("rootHeight",t),o.style.height="calc("+s+" + "+(t+n)+"px)",o.style.setProperty("--input-height",t+"px")),r=!1}))&&c.observe(i),d.data.set("ro",c)),"normal"!==d.chatInputInstance.getMode()||(c=(0,w.$)("#main-wrapper")).length&&c.trigger("smartInputRerender"),d.watch("isShowOverWordTip",function(t){t&&d.sendUbcLog("show","long_query_toast",{query:d.chatInputInstance.getValue()},!0)}),d.getShowMoreGuide(),d.sendUbcLog("show","deepsearch_btn",{aisou_text:d.data.get("buttonText.text")}),d.watch("musicPlaceHolder",function(t){var e;0===d.chatInputInstance.getValue().length&&null!==(e=d.chatInputInstance)&&void 0!==e&&e.setPlaceHolder(t)}))}),this.setBorderAnimationInfo()},_.prototype.error=function(t){this.sendExceptSpyLog(t)},_.prototype.spySend=function(t){var e,t="https://sp1.baidu.com/5b1ZeDe5KgQFm2e88IuM_a/mwb2.gif?"+["pid=19_103","lid="+((null===(e=window.s_session)||void 0===e?void 0:e.qid)||""),"ts="+Date.now(),"type="+t.type,"group="+t.group,"info="+encodeURIComponent(JSON.stringify(t.info)),"dim="+encodeURIComponent(JSON.stringify(t.dim||{})),"extra="+encodeURIComponent(JSON.stringify(t.extra))].join("&");navigator.sendBeacon&&navigator.sendBeacon(t)||((new Image).src=t)},_.prototype.sendPerfSpyLog=function(t,e,n){var i;void 0===n&&(n={});try{var o=performance.now();if(.1<=Math.random()&&!t)return;this.spySend({type:"perf",group:"chatinput_perf",info:((i={})[e]=(o-t).toFixed(2),i),dim:{type:this.chatInputInstance.getCurrentPanelName(),from:"superman-san"},extra:n})}catch(a){console.warn(a)}},_.prototype.sendCountSpyLog=function(t,e){void 0===e&&(e={});try{if(.0625<=Math.random())return;this.spySend({type:"count",group:"super-page",info:t,extra:e})}catch(n){console.warn(n)}},_.prototype.sendExceptSpyLog=function(t){try{this.spySend({type:"except",group:"chat_input_js_error",info:{msg:"string"==typeof t?t:t.message,stack:(t.stack||"").split("\n").slice(0,5).join("\n"),pageUrl:location.href}})}catch(e){console.warn(e)}},_.prototype.setBorderAnimationInfo=function(){var t=this.ref("ai-search-btn");t&&(this.data.set("aiSearchWidth",t.offsetWidth),this.data.set("aiSearchHeight",t.offsetHeight))},_.prototype.getShowMoreGuide=function(){var t=this.data.get("hiddenButtons");this.data.set("showGuideClass",t.some(function(t){if(t.guide)try{var e=localStorage.getItem(u.INPUT_PANEL_BTN_CLICKED_GUIDE),n=e&&JSON.parse(e)||{};return!e||!n[t.type]}catch(err){return console.warn(err),!1}return!1})?"guide":"")},_.prototype.getToken=function(){var t=+new Date,e=(null===(n=window.s_session)||void 0===n?void 0:n.qid)||"",n=this.data.get("token");return btoa(n+"||"+t+"|"+e)+"-"+e},_.prototype.handlePopState=function(){var t;try{var e=new URL(location.href).searchParams,n=e.get("wd")||e.get("word");this.chatInputInstance.getValue()||(null!==(t=this.chatInputInstance)&&void 0!==t&&t.closeSugUpdate(),this.chatInputInstance.setValue(n))}catch(err){console.warn(err)}},_.prototype.disposed=function(){var t;this.tipTimer=null,window.removeEventListener("popstate",this.handlePopStateCallback);var e=this.data.get("ro");null!==(t=null==e?void 0:e.disconnect)&&void 0!==t&&t.call(e)},_.prototype.getInputStats=function(){var t=this.data.get("fileList"),e=Array.isArray(t)&&0<t.length,n=e&&"image"===t[0].uploadType,t=this.chatInputInstance.getValue();return e&&t?n?"text_pic":"text_file":e?n?"pic":"file":t?"text":"blank"},_.prototype.checkSupportIs=function(){var t,e;null!==(t=null===(e=window.bds)||void 0===e?void 0:e.comm)&&void 0!==t&&t.supportis&&!(0,w.$)("#wrapper").hasClass("smart_input_superman")&&(this.data.set("isShowOpenningAnime",!1),this.data.set("rootHeight",0),null!==(t=null==(e=this.data.get("ro"))?void 0:e.disconnect)&&void 0!==t&&t.call(e),this.data.set("ro",null))},_.prototype.calculateStrIsOverWord=function(t){for(var e=t.length,n=0,i=0;i<e;i++)if(30<=(n=null!==t.charAt(i).match(/[^\x00-\xff]/gi)?n+2:n+1))return!0;return!1},_.prototype.handleAddInputContent=function(t){var e=this.chatInputInstance.getValue();this.chatInputInstance.addAiInputContent({word:(e?"，":"")+t.word,noClear:!0})},_.prototype.gotoChat=function(t){var i=this,e=t.query,n=t.sseQuery,o=t.hasImage,a=t.hasFile,r=t.isEdit,s=t.guideSa,l=void 0===s?"":s,u="aiinput_longq",c="aiinput_longq",p=this.chatInputInstance.getFunctionInfo(),t=p.functionType,s=p.functionName,p=void 0===s?"":s,s={ai_chat:"aidialog",ai_ppt:"ppt",office_create:"office",photo_editing:"pic",ai_read:"read",ai_code:"aicode",deep_research:"deepresearch",ai_numerology:"yunshi",ai_music_create:"music"}[t];s?c=(u="functab_"+s)+((d=p.replace(/_([a-zA-Z])/g,function(t,e){return e.toUpperCase()}))?"_"+d:"")+"_edit":this.data.get("isAiSearch")?(u="aiinput_askai",c=this.data.get("jumpDsBtnSample")?r?"aiinput_aiaskedit":"aiinput_aiaskdefaultq":"aiinput_askai"):o?(u="aiinput_duomo_pic",c=l?"aiinput_duomo_pic_"+l:"aiinput_duomo_pic"):a&&(c=u="aiinput_duomo_file");s=this.data.get("hasUsedVoiceInput");s&&(u="aiinput_voice",c="bvoice_home_aiinput");p={};this.data.get("isAiSearch")&&(p={modelName:"smartMode",modelFunction:{deepSearch:"1"}});var d={},r=this.data.get("numeroButtonActiveValue");this.isEmptyObject(r)||(d=r.reduce(function(t,e){var n;return"birthday"===e.optionType?t[e.optionType]=i.extractDateFromDateTime(e.value):"birthplace"===e.optionType?(n=null===(n=i.data.get("numeroButtonData").find(function(t){return"birthplace"===t.optionType}))||void 0===n?void 0:n.data[0],t[e.optionType]=n.selectedCities):t[e.optionType]=e.value,t},{}));var h=(null===(r=this.ref("drawButton"))||void 0===r?void 0:r.getDrawInfo())||{},g=Object.keys(h).reduce(function(t,e){return t[e]=h[e].text,t},{});e+=Object.keys(g).filter(function(t){return g[t]}).map(function(t){return"style"===t?"，图片风格为"+g[t]:"，比例"+g[t]}).join("");try{var f=JSON.parse(localStorage.getItem("HIS_AI_LIST")||"[]");e.length<40&&!o&&!a&&(f.push({kw:e,time:Math.round((new Date).getTime()/1e3),aiflag:1}),localStorage.setItem("HIS_AI_LIST",JSON.stringify(f))),(o||a)&&this.data.get("aiHisSample")&&""===e&&n.push({data:{text:{query:o?"解读图片":"总结文档"}},type:"TEXT"})}catch(m){console.error(m)}c=(0,k.__assign)({enter_type:"home_"+u},e||n.length?{sa:s?c:"home_"+c}:{});"guideq_similarpic"===l&&(c.searchInfo={interactive_type:19}),location.href=I+"/search?word="+encodeURIComponent(e)+(e||0!==n.length?"":"&isShowHello=1")+"&extParamsJson="+encodeURIComponent(JSON.stringify(c))+(p?"&usedModel="+encodeURIComponent(JSON.stringify(p)):"")+(0!==n.length?"&fileInfo="+encodeURIComponent(JSON.stringify(n)):"")+(x[t]?"&openInputMode="+x[t]:"")+(d?"&numeroData="+encodeURIComponent(JSON.stringify(d)):"")},_.prototype.isEmptyObject=function(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0},_.prototype.extractDateFromDateTime=function(t){if(!t||"string"!=typeof t)return"";var e=t.split("-");return 3<=e.length?e[0]+"-"+e[1]+"-"+e[2]:t},_.prototype.checkAnime=function(){try{var t="INPUT_ANIME_LAST_SHOWN_DATE",e=(new Date).toISOString().split("T")[0];localStorage.getItem(t)!==e&&(this.data.set("isShowOpenningAnime",!0),localStorage.setItem(t,e))}catch(err){console.warn(err)}},_.prototype.resetMic=function(t){window.__supportvoice&&(this.data.set("isShowMic",t),(0,w.$)("#smart-input-mic").css("display",t?"block":"none"))},_.prototype.resetStatus=function(){this.data.set("prefixContent",""),this.data.set("isAiSearch",!1),this.resetMic(!0),this.data.set("isAiPanelSearch",!1),this.data.set("isShowFileUpload",!0),this.data.set("isOverWord",!1),this.data.set("linkOptions",{})},_.prototype.handleClickAiSearch=function(t){null!=t&&t.stopPropagation();var e,n=this.chatInputInstance.getValue(),t=!this.data.get("isAiSearch");this.sendUbcLog("click","deepsearch_btn",{aisou_btn:t?"1":"0",aisou_text:this.data.get("buttonText.text"),searchkuang_content_type:n?"input_q":"default_q"}),this.data.set("isAiSearch",t),this.data.get("jumpDsBtnSample")?(e=(null==(e=document.querySelector("#chat-textarea"))?void 0:e.dataset.normalPlaceholder)||"",e=n&&n.slice(0,1e3)||e,this.handleSubmit(e,"",!1,{},!1)):(null!==(e=this.chatInputInstance)&&void 0!==e&&e.setFocus(),this.resetMic(!t))},_.prototype.handleDeepsearchHover=function(){this.sendUbcLog("show","aisou_hover",{aisou_text:this.data.get("buttonText.text")})},_.prototype.handleFileContainerLog=function(t){var e=this.chatInputInstance.getCurrentPanelName();this.sendUbcLog(t.type,t.value,{area:e||"blank",aisou_btn:!e&&this.data.get("isAiSearch")?"1":"0"})},_.prototype.handleFileRemove=function(t){var e,n=this;t?this.data.remove("fileList",t):this.data.set("fileList",[]),this.data.get("fileList").length||(this.chatInputInstance.getCurrentPanelName()?this.chatInputInstance.resetPanelStatus():(e=this.chatInputInstance.getValue(),this.chatInputInstance.reset(),this.chatInputInstance.resetPanelStatus(),this.chatInputInstance.setValue(e),setTimeout(function(){n.calculateStrIsOverWord(e)&&n.data.set("isOverWord",!0)})))},_.prototype.handleFileLog=function(){var t=this.chatInputInstance.getValue(),e=this.data.get("curUploadType"),n=this.data.get("fileList");return t?0===n.length?"text":"image"===e?"text_pic":"text_file":0===n.length?"blank":"image"===e?"pic":"file"},_.prototype.handleClickUploadFile=function(p,o,a,d){var h;return void 0===a&&(a=""),(0,k.__awaiter)(this,void 0,void 0,function(){var r,s,l,u,e,n,i,c=this;return(0,k.__generator)(this,function(t){switch(t.label){case 0:return(null!==(h=null==d?void 0:d.stopPropagation)&&void 0!==h&&h.call(d),this.chatInputInstance.stopVoiceRecording(),(i=(0,w.$)('.result-molecule[tpl="app/chat-input"]')).length&&i.trigger("duomo-btn-click",{uploadType:p,uploadFile:o}),this.sendUbcLog("click","search_kuang",{pos:"file"===p?p:"pic",query:this.chatInputInstance.getValue(),is_query_over:this.calculateStrIsOverWord(this.chatInputInstance.getValue())?"1":"0",file_status:this.handleFileLog()}),e=this.data.get("fileList")||[],n=this.data.get("curUploadType"),r=this.data.get("uploadFileMaxNum"),s=this.data.get("isPCSingleFileSample"),i=!1,"readUpload"===a?i=!(n&&n!==p):"dragOrPasteUpload"===a&&(i=!0),!s&&n&&n!==p)?(i&&this.showToast({message:"暂不支持文件、图片混合上传"}),[2]):!s&&e.length>=r?(i&&this.showToast({message:"file"===n?"上传文件最多支持"+r+"个":"上传图片最多支持"+r+"个"}),[2]):(l=+new Date,e=((u=null)===(h=this.data.get("fileList"))||void 0===h?void 0:h.length)||0,i=function(t){var e,n=t.status,i=t.fileInfo,o=t.progress,t=t.recommendWord,a=c.data.get("fileList");n===T.UploadStatus.INIT?(s&&r<=y.length&&(y.shift(),c.data.shift("fileList"),a.shift()),e=!1,y.forEach(function(t){t.timeStamp===l&&(e=!0)}),e||(y.push({uploadFileIns:u,timeStamp:l}),c.chatInputInstance.fileUpLoadInput(),c.resetMic(!1)),i&&a.push({status:T.UploadStatus.UPLOADING,fileToken:i.fileToken,timeStamp:l,fileName:i.fileName,uploadType:p,fileType:(0,T.getFileType)(i.fileName),fileSize:i.fileSize,progress:o,fileId:i.fileId})):n===T.UploadStatus.STSSUCCESS?(a.forEach(function(t,e){t.fileToken===(null==i?void 0:i.fileToken)&&(a[e].status=n,a[e].progress=o)}),t&&c.data.set("fileGuideWords",c.handleFileGuideWords(p,t))):n===T.UploadStatus.UPLOADING?(c.__startUploadTime=null===performance||void 0===performance?void 0:performance.now(),a.forEach(function(t,e){t.fileToken===(null==i?void 0:i.fileToken)&&(a[e].status=n,a[e].progress=o)})):n===T.UploadStatus.NOT_AVAILABLE?c.showToast({message:"暂不支持此格式，换个文件试试"}):n===T.UploadStatus.BOS_SUCCESS?(a.forEach(function(t,e){t.fileToken===(null==i?void 0:i.fileToken)&&(a[e].progress=o,a[e].status=n,a[e].url=null==i?void 0:i.fileUrl,a[e].fileId=null==i?void 0:i.fileId,a[e].filePath=null==i?void 0:i.filePath)}),c.sendPerfSpyLog(c.__startUploadTime,"uploadTime"),c.handleFileContainerLog({type:"show",value:"file_icon"})):n===T.UploadStatus.NETWORK_ERROR?(a.forEach(function(t,e){t.fileToken===(null==i?void 0:i.fileToken)&&(a[e].status=n)}),c.showToast({message:"网络错误，请重试"})):n===T.UploadStatus.RISK_DENY?(c.showToast({message:"当前文件暂不支持，换个文件试试吧"}),s?(y.pop(),c.data.shift("fileList")):c.splitItemFromFileList(a,null==i?void 0:i.fileToken)):n===T.UploadStatus.FILE_SIZE_EXCEED_LIMIT?(c.showToast({message:"file"===p?"文件超过50M，请重新选择后上传":"图片超过10M，请重新选择后上传"}),s&&(y.pop(),c.data.shift("fileList"))):n===T.UploadStatus.FILE_SIZE_BELOW_LIMIT?(c.showToast({message:"当前文件暂不支持，换个文件试试吧"}),s&&(y.pop(),c.data.shift("fileList"))):n===T.UploadStatus.FILE_NUM_EXCEED_LIMIT?s||c.showToast({message:"file"===p?"上传文件最多支持"+r+"个":"上传图片最多支持"+r+"个"}):n===T.UploadStatus.FILE_REUPLOAD?s&&(y.pop(),c.data.shift("fileList")):c.data.set("isFileUploading",!1);t=JSON.parse(JSON.stringify(a));c.data.set("fileList",t),c.data.get("isHome")||(n===T.UploadStatus.INIT?c.chatInputInstance.renderAiInputFilePrefix(c.data.get("fileList")[0],c.data.get("fileList").length,!1):n!==T.UploadStatus.BOS_SUCCESS&&n!==T.UploadStatus.NETWORK_ERROR||2!==c.data.get("fileReady")&&c.chatInputInstance.renderAiInputFilePrefix(c.data.get("fileList")[0],c.data.get("fileList").length,!0))},n=(null===(h=window.s_session)||void 0===h?void 0:h.qid)||"",i={type:p,maxSize:50,maxNum:s?1:r-e,token:btoa(this.data.get("token")+"||"+l+"|"+n)+"-"+n,callback:i,sseHost:I},"image"===p&&(i.maxSize=10),[4,T.UploadFile.create(i)]);case 1:return u=t.sent(),(o?u.uploadFiles(o):u.getFile())["catch"](function(){}),[2]}})})},_.prototype.handleLinkClick=function(){var t=this,e=this.data.get("linkOptions")||{};this.chatInputInstance.addAiInputContent({inputCustom:(null===(e=null===(e=e["function"])||void 0===e?void 0:e.input)||void 0===e?void 0:e.input_custom)||[]}),this.nextTick(function(){t.data.set("fileList",[])})},_.prototype.showToast=function(t){var e=t.message,t=t.duration,t=void 0===t?2e3:t;this.data.set("toastMsg",e),this.data.set("toastDuration",t),this.ref("toast").show()},_.prototype.handlePanelBtnShow=function(t){var e=t.value,t=t.ext;this.sendUbcLog("show",e,t)},_.prototype.handleMoreMenuShow=function(){var e=this;this.data.get("hiddenButtons").forEach(function(t){e.ref("more-btn-"+t.type)&&e.ref("more-btn-"+t.type).sendShowLog()})},_.prototype.updatePanelExternalProps=function(t){this.chatInputInstance&&this.chatInputInstance.getCurrentPanelName()&&this.chatInputInstance.updatePanelData(t)},_.prototype.handleFileClick=function(n){var t=this.data.get("isPCSingleFileSample");n.status===T.UploadStatus.NETWORK_ERROR&&(t?this.data.set("fileList",[]):this.data.remove("fileList",n),y.forEach(function(t){var e;t.timeStamp===n.timeStamp&&null!==(e=t.uploadFileIns)&&void 0!==e&&e.reTryUpload(n.fileToken)}))},_.prototype.handleFileGuideWords=function(t,e){var n="file"===t?0:1,t=e.find(function(t){return t.type===n}),e=t.limit,t=t.textsInfo;return t&&e&&t.slice(0,e)},_.prototype.handleClickOverwordSubmit=function(){var t=this;this.nextTick(function(){t.chatInputInstance.getInputEl().blur()}),this.sendUbcLog("click","long_query_toast",{query:this.chatInputInstance.getValue()},!0);var e=this.chatInputInstance.getValue();this.handleSubmit(e,"",!1)},_.prototype.appendAiMusicQuery=function(t){var e=this.data.get("musicButtonActiveValue")||{},n="请帮我生成音乐：",i=null===(o=e.musicStyle)||void 0===o?void 0:o.text,o=null===(a=e.timbre)||void 0===a?void 0:a.text,a=[];i&&a.push("曲风为“"+i+"”"),o&&a.push("音色为“"+o+"”");a=a.join("，");return"自定义歌词"===(null===(e=null===e?void 0:e.wordMethod)||void 0===e?void 0:e.text)?a?n+a+"。\n歌词：\n"+t:n+"\n歌词：\n"+t:a?n+t+"。"+a+"。":n+t+"。"},_.prototype.handleSubmit=function(t,e,n,i,o,a){var r=this;void 0===n&&(n=!0),void 0===i&&(i={}),void 0===o&&(o=!0),void 0===a&&(a="");var s=(null===(l=this.ref("numeroButton"))||void 0===l?void 0:l.getNumeroInfo())||{};if(this.data.set("numeroButtonActiveValue",s),s&&0<Object.keys(s).length&&(t||(t+="测测我的今日运势"),t+=s.filter(function(t){return t.type!==t.text}).map(function(t){var e=null==t?void 0:t.text;return"出生日"===t.type&&(e=r.extractDateFromDateTime(t.text)),"，"+t.type+"为"+e}).join("")),"ai_music_create"===this.chatInputInstance.getCurrentPanelName()){if(t.length<5)return void this.showToast({message:"最少输入5个字"});t=this.appendAiMusicQuery(t)}var l=!1;if("ai"===this.chatInputInstance.getMode()){var u=(u=this.data.get("fileList")).filter(function(t){return 2===t.status}),s=this.data.get("fileReady"),c="";if(2===s?c="文件上传中":t||3!==s||u.length||(c="请输入你的问题"),c)return void this.showToast({message:c});var p=t.slice(0,1e3),c=this.data.get("sendFileStatus"),d=!1,h=!1,g=[];c&&0<u.length&&(g=u.map(function(t){var e,n,i=t.uploadType;return"image"===i?d=!0:"file"===i&&(h=!0),{type:null==i?void 0:i.toUpperCase(),data:((e={})[i]=(0,k.__assign)(((n={})[i+"_url"]=t.url,n[i+"_id"]=t.fileId,n),"file"===i?{file_name:t.fileName,file_type:t.fileType,file_size:t.fileSize}:{}),e)}})),p&&0!==(null==g?void 0:g.length)&&g.unshift({data:{text:{query:p}},type:"TEXT"}),"sug"===e&&this.chatInputInstance.hideSug(!0),setTimeout(function(){r.gotoChat({query:p,sseQuery:g,hasImage:d,hasFile:h,isEdit:0!==g.length,guideSa:a})},50)}else{var c=document.querySelector("#chat-textarea"),u=(null==c?void 0:c.dataset.normalPlaceholder)||"";if(this.data.get("isAiSearch")||!n&&this.calculateStrIsOverWord(t)){n=t&&t.slice(0,1e3)||u;return"sug"===e&&this.chatInputInstance.hideSug(!0),void this.gotoChat({query:n,sseQuery:[],hasImage:!1,hasFile:!1,isEdit:n!==(null==c?void 0:c.dataset.normalPlaceholder)})}!t&&u&&(l=!0),t=(t=t||u).slice(0,100),(0,w.$)("#kw").val(t),t===u&&(null!==(u=this.chatInputInstance)&&void 0!==u&&u.closeSugUpdate(),this.chatInputInstance.setValue(t)),window.bds.comm.isVoice=this.data.get("hasUsedVoiceInput"),(0,w.$)("#form").trigger("submit"),this.checkSupportIs(),this.data.set("hasUsedVoiceInput",!1)}o&&this.sendUbcLog("click","search_kuang",(0,k.__assign)({query:t,is_query_over:this.calculateStrIsOverWord(t)?"1":"0",pos:e,is_default_q:"enter"!==e&&"se_btn"!==e||!l?"0":"1"},i))},_.prototype.handleClickPanelBtn=function(t){var i=this;this.__startClickPanelTime=null===performance||void 0===performance?void 0:performance.now();var o,a=t.panel,e=t.pos,n=t.content,t=t.area;this.nextTick(function(){i.getShowMoreGuide()}),this.sendUbcLog("click","ai_search"===a.type?"home_operate":"capsule_bub",{function_type:a.type,function_pos:e,pos:e,content:n,area:t}),a.url||("photo_editing"!==a.type&&this.data.set("drawButtonsData",[]),"ai_numerology"!==a.type&&(this.data.set("numeroButtonData",[]),this.data.set("numeroButtonActiveValue",null)),"ai_music_create"!==a.type&&(this.data.set("musicButtonData",[]),this.data.set("musicButtonActiveValue",null)),o={curUploadType:this.data.get("isPCSingleFileSample")?"":this.data.get("curUploadType")},"ai_chat"!==a.type?w.$.ajax({url:I+"/aichat/api/getChatTools?type="+a.type,type:"GET",data:"",headers:{"Content-Type":"application/json"},traditional:!0,xhrFields:{withCredentials:!0},success:function(t){var e,n;i.sendPerfSpyLog(i.__startClickPanelTime,"panelFetchTime"),t&&0===t.status&&(e=(null==t?void 0:t.data)||{},n=(null===(t=null===(t=e.jump_panel)||void 0===t?void 0:t.data)||void 0===t?void 0:t[e.type])||{},i.nextTick(function(){i.data.set("numeroButtonData",e.numerologyOptions||[]),i.data.set("musicButtonData",e.musicOptions||[]),i.data.set("drawButtonsData",e.pictureOptions||[]),i.data.set("linkOptions",n.bottom_bar||{})}),Object.assign(n,{"function":e["function"]}),i.chatInputInstance.openAiPanel((0,k.__assign)((0,k.__assign)({},a),{type:e.type}),n,o))}}):this.chatInputInstance.openAiPanel(a))},_.prototype.handleFileQuery=function(t){var e=t.query,n=t.index,i=t.sa,t=this.data.get("curUploadType");this.handleSubmit(e,"file"===t?"file_guide_word":"pic_guide_word",!0,{order:n+1,title:e},!0,i)},_.prototype.splitItemFromFileList=function(t,e){for(var n=t.length-1;0<=n;n--)t[n].fileToken===e&&t.splice(n,1)},_.prototype.handleAddFileLog=function(t){var e=t.type,n=t.value,t=t.ext;this.sendUbcLog(e,n,void 0===t?{}:t)},_.prototype.sendUbcLog=function(t,e,n,i){var o;void 0===n&&(n={}),void 0===i&&(i=!1);var a=((null===(a=this.chatInputInstance)||void 0===a?void 0:a.getStatusInfo())||{}).panelName,a=(0,k.__assign)((0,k.__assign)({},i?{}:{function_type:a}),n);"click"===t?null!==(n=w.F.ubc)&&void 0!==n&&n.sendClickLog(e,a):"show"===t?null!==(o=w.F.ubc)&&void 0!==o&&o.sendShowLog(e,a):null!==(o=w.F.ubc)&&void 0!==o&&o.sendLog(t,e,a)},_.prototype.showAiBtnHover=function(){var t=this.ref("border-animation");t&&t.showHover()},_.prototype.hideAiBtnHover=function(){var t=this.ref("border-animation");t&&t.hideHover()},_.prototype.initSpyCountLogListener=function(){var t,i=this;this.__spyHandler=function(t){var e,n;null!=t&&t.isTrusted&&(e=null,!(e=(t=t.target)instanceof Element?(null===(n=t.closest)||void 0===n?void 0:n.call(t,"[data-spy-count]"))||null:e)||(n=e.getAttribute("data-spy-count"))&&i.sendCountSpyLog(((e={})[n]=1,e)))},null!==(t=this.el)&&void 0!==t&&t.addEventListener("click",this.__spyHandler,{capture:!0})},_.prototype.detached=function(){var t;null!==(t=this.el)&&void 0!==t&&t.removeEventListener("click",this.__spyHandler,{capture:!0}),this.__spyHandler=null},_.trimWhitespace="all",_.components={"chat-input":a["default"],"panel-btn":u["default"],"file-container":s["default"],"file-guide":l["default"],"d-tooltip":c["default"],"d-toast":p["default"],"animation-video":d["default"],"drop-down-btn":v["default"],"border-animation-svg":b["default"],"cs-numero-button":h["default"],"cs-music-button":f["default"],"cs-draw-button":m["default"]},_.messages={"ui:input-delete-file":function(t){this.handleFileRemove(t.value)},"ui:input-file-click":function(t){this.handleFileClick(t.value)},"ui:input-upload":function(t){var e=this.data.get("curUploadType");this.sendUbcLog("click","file"===e?"file_add":"photo_add",{}),this.handleClickUploadFile(t.value)}},_.computed={isShowOverWordTip:function(){var t=this.data.get("fileList"),e=this.data.get("isOverWord"),n=this.data.get("isAiSearch"),i=this.data.get("isVoiceRecording");return!n&&e&&0===t.length&&!i},fileReady:function(){var t,e,n=this.data.get("fileList")||[],i=Number(!!n.length);try{for(var o=(0,k.__values)(n),a=o.next();!a.done;a=o.next()){var r=a.value;if(3===r.status)i=3;else if(-1===r.status||0===r.status||1===r.status){i=2;break}}}catch(s){t={error:s}}finally{try{a&&!a.done&&(e=o["return"])&&e.call(o)}finally{if(t)throw t.error}}return i},showFileGuide:function(){var t=this.data.get("fileGuideWords")||[],e=this.data.get("fileList");return t.length&&e&&e.length},sendFileStatus:function(){var t=this.data.get("prefixContent");return!t||"ai_read"===t.trim()},curUploadType:function(){var t=this.data.get("fileList")||[];return t.length?t[0].uploadType:""},isRenderLeftTool:function(){var t=this.data.get("isAiPanelSearch"),e=this.data.get("numeroButtonData")||[],n=this.data.get("drawButtonsData")||[],i=this.data.get("musicButtonData")||[];return!t||e.length||n.length||i.length}},(0,k.__decorate)([n.injectable],_));function _(t){t=i.call(this,t)||this;return t.chatInputInstance=null,t.mockReadProgressTimer=null,t.__spyHandler=null,t.tipTimer=null,t.__startClickPanelTime=0,t.__startUploadTime=0,t}e["default"]=n},function(t,e){t.exports=' <div class="chat-input-anchor {{isChatSearch ? \'chat-input-anchor-ai-search\' : \'\'}}"> <div id="chat-input-main" class="{{initialRow === 2 ? \'two-line-input\': \'one-line-input\'}} {{initialFocus ? \'chat-input-main-focus\': \'\'}}"> <div class="chat-input-op-anime"></div> <div class="chat-input-wrapper-border {{isChatSearch ? \'chat-input-wrapper-border-ai-search\' : \'\'}}"></div> <div class="chat-input-wrapper-box-shadow"></div> <div class="chat-input-wrapper chat-normal-wrapper"> <slot name="optimizer-loading-mask"></slot> <div class="chat-input-container"> <div id="chat-input-top-band"> <slot name="top-band"></slot> </div> <div id="chat-input-area"> <textarea id="chat-textarea" class="chat-input-textarea chat-input-scroll-style" data-ai-placeholder="{{aiPlaceholder}}" data-normal-placeholder="{{normalPlaceholder}}" rows="1" value="{{query}}" onkeydown="if (event.keyCode === 13) event.preventDefault();"></textarea> </div> <div class="chat-input-tool"> <div id="left-tool" class="left-tools-wrapper"> <slot name="left-tool"></slot> </div> <div class="tools-placeholder-wrapper"></div> <div class="right-tools-wrapper"> <div id="right-tool"> <div class="tools-clear-icon {{query ? \'show-clear-icon\' : \'\'}}"> <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18" fill="none"> <g opacity="0.5" clip-path="url(#clip0_789_21003)"> <path d="M9.00033 17.3334C13.6027 17.3334 17.3337 13.6024 17.3337 9.00008C17.3337 4.39772 13.6027 0.666748 9.00033 0.666748C4.39796 0.666748 0.666992 4.39772 0.666992 9.00008C0.666992 13.6024 4.39796 17.3334 9.00033 17.3334ZM12.1384 6.80482L9.94309 9.00008L12.1384 11.1953L11.1955 12.1381L9.00026 9.94288L6.80503 12.1381L5.86219 11.1953L8.05746 9.00008L5.86219 6.80482L6.80503 5.86202L9.00026 8.05728L11.1955 5.86202L12.1384 6.80482Z" fill="#9195A3"/> </g> <defs> <clipPath id="clip0_789_21003"> <rect width="18" height="18" fill="white"/> </clipPath> </defs> </svg> </div> <div id="voice-input-wrapper"></div> <slot name="right-tool"></slot> </div> <img s-if="{{isChatSearch}}" id="chat-submit-button-ai" class="{{isSubmitButtonActive ? \'chat-submit-button-ai-active\' : \'\'}}" src="https://psstatic.cdn.bcebos.com/basics/chat/send-icon_1750678058000.svg" alt on-click="handleSubmit"> <button s-else id="chat-submit-button" on-click="handleSubmit"> 百度一下 </button> </div> </div> </div> <div id="chat-input-panel"> </div> <slot s-if="{{isChatSearch}}" name="chat-search-sug"></slot> <slot s-if="{{isChatSearch}}" name="chat-input-prompt-optimizer"></slot> <slot s-if="{{isChatSearch}}" name="chat-input-upload-panel"></slot> </div> </div> <div s-if="{{initialRow !== 1}}" id="chat-input-extension"> <slot name="chat-input-extension"></slot> </div> </div> '},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,o=n(1),n=n(0),o=(i=n.Component,(0,o.__extends)(a,i),a.prototype.initData=function(){return{initialFocus:!1,initialRow:2,query:"",aiPlaceholder:"",normalPlaceholder:"",isChatSearch:!1,isSubmitButtonActive:!1,useBuiltInVoice:!1}},a);function a(){return null!==i&&i.apply(this,arguments)||this}e["default"]=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.appendChildToAiInputWithBr=e.createAiInputEditorContent=e.getDragFileType=e.hitSample=e.getDataFromDom=e.isCursorAtEnd=e.hasSelection=e.insertAtTextareaRange=e.insertAtRange=e.handleCustomInputData=e.isCaretAtEnd=e.createSugPanelDom=e.handleInputFieldBackspace=e.handleInputFieldChange=e.existCustomNode=e.focusNeedInput=e.focusInputLast=e.getCustomInputNode=e.getInputNode=e.getTextNode=e.getCursorPosition=e.setCursorToNode=e.deleteWaitNode=e.